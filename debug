Test start time: 2020å¹´ 12æœˆ 27æ—¥ æ˜ŸæœŸæ—¥ 22:23:02 CST
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Stopping zookeeper ... no zookeeper to stop (could not find file /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/data/zookeeper_server.pid)
Clearing zookeeper ... CLEARED
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Starting zookeeper ... STARTED
Zookeeper started at port 22181
starting server
cd /home/smilencer/Code/incubator-pegasus/onebox/meta1 && /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta &>result &
smilenc+  361298  361236  0 22:23 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta2 && /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta &>result &
smilenc+  361306  361236  0 22:23 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta3 && /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta &>result &
smilenc+  361314  361236  0 22:23 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/replica1 && /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica &>result &
smilenc+  361384  361236  0 22:23 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica2 && /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica &>result &
smilenc+  361431  361236  0 22:23 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica3 && /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica &>result &
smilenc+  361489  361236  0 22:23 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
Wait cluster to become healthy...
Sleeped for 1 seconds
Sleeped for 2 seconds
Sleeped for 3 seconds
Sleeped for 4 seconds
Sleeped for 5 seconds
Sleeped for 6 seconds
Sleeped for 7 seconds
Sleeped for 8 seconds
Sleeped for 9 seconds
Sleeped for 10 seconds
Sleeped for 11 seconds
Sleeped for 12 seconds
Sleeped for 13 seconds
Sleeped for 14 seconds
Sleeped for 15 seconds
Sleeped for 16 seconds
Sleeped for 17 seconds
Sleeped for 18 seconds
Sleeped for 19 seconds
Sleeped for 20 seconds
Cluster becomes healthy.
~/Code/incubator-pegasus/src/builder/bin/pegasus_function_test ~/Code/incubator-pegasus
W2020-12-27 22:23:27.166 (1609079007166682457 58bfa) unknown.io-thrd.363514:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
W2020-12-27 22:23:27.166 (1609079007166700465 58bfa) unknown.io-thrd.363514:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX_ACK from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
D2020-12-27 22:23:27.1685 (1609079007168678589 58bfa) unknown.io-thrd.363514: process(363514) start: 1609079007165, date: 2020-12-27 22:23:27.165
D2020-12-27 22:23:27.168 (1609079007168956068 58bfa) unknown.io-thrd.363514: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:27.1681 (1609079007168960974 58bfa) unknown.io-thrd.363514: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_DSN ...
D2020-12-27 22:23:27.169ÿ (1609079007169022977 58bfa) unknown.io-thrd.363514: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:27.1691 (1609079007169113018 58bfa) unknown.io-thrd.363514: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_DSN ...
D2020-12-27 22:23:27.169 (1609079007169251970 58bfa) unknown.io-thrd.363514: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:27.1691 (1609079007169255910 58bfa) unknown.io-thrd.363514: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:23:27.169ÿ (1609079007169312669 58bfa) unknown.io-thrd.363514: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:27.1691 (1609079007169464227 58bfa) unknown.io-thrd.363514: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:23:27.169 (1609079007169582467 58bfa) unknown.io-thrd.363514: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:27.1691 (1609079007169586117 58bfa) unknown.io-thrd.363514: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_RAW ...
D2020-12-27 22:23:27.169ÿ (1609079007169616988 58bfa) unknown.io-thrd.363514: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:27.1691 (1609079007169702939 58bfa) unknown.io-thrd.363514: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_RAW ...
D2020-12-27 22:23:27.169 (1609079007169708477 58bfa) unknown.io-thrd.363514: === service_node=[mimic], primary_address=[192.168.123.119:1] ===
W2020-12-27 22:23:27.1691 (1609079007169737993 58c13)  mimic.io-thrd.363539: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:23:27.1708 (1609079007170010041 58bfa) unknown.io-thrd.363514: [mimic] thread pool [default] started, pool_code = THREAD_POOL_DEFAULT, worker_count = 8, worker_share_core = true, partitioned = false, ...
W2020-12-27 22:23:27.1701 (1609079007170042547 58c1c)  mimic.io-thrd.363548: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:23:27.1704 (1609079007170188022 58bfa) unknown.io-thrd.363514: [mimic] thread pool [THREAD_POOL_META_SERVER] started, pool_code = THREAD_POOL_META_SERVER, worker_count = 4, worker_share_core = true, partitioned = false, ...
D2020-12-27 22:23:27.170 (1609079007170248001 58bfa) unknown.io-thrd.363514: MainThread: app_name=temp
Note: Google Test filter = basic.*
[==========] Running 8 tests from 1 test case.
[----------] Global test environment set-up.
[----------] 8 tests from basic
[ RUN      ] basic.set_get_del
D2020-12-27 22:23:27.1701 (1609079007170382720 58bfa)  mimic.io-thrd.363514: client session created, remote_server = 127.0.0.1:34602, current_count = 1
D2020-12-27 22:23:27.1701 (1609079007170468415 58bfe)  mimic.io-thrd.363518: client session connected, remote_server = 127.0.0.1:34602, current_count = 1
D2020-12-27 22:23:27.1702 (1609079007170716319 58bfb)  mimic.io-thrd.363515: client session created, remote_server = 192.168.123.119:34601, current_count = 2
D2020-12-27 22:23:27.1702 (1609079007170776748 58bfd)  mimic.io-thrd.363517: client session connected, remote_server = 192.168.123.119:34601, current_count = 2
D2020-12-27 22:23:27.1703 (1609079007170935546 58c15)  mimic.default1.01008bfa00030003: client session created, remote_server = 192.168.123.119:34801, current_count = 3
D2020-12-27 22:23:27.1703 (1609079007170993301 58bfc)  mimic.io-thrd.363516: client session connected, remote_server = 192.168.123.119:34801, current_count = 3
[       OK ] basic.set_get_del (2 ms)
[ RUN      ] basic.multi_get
D2020-12-27 22:23:27.1724 (1609079007172611814 58bfa)  mimic.io-thrd.363514: client session created, remote_server = 192.168.123.119:34802, current_count = 4
D2020-12-27 22:23:27.1724 (1609079007172666584 58bfc)  mimic.io-thrd.363516: client session connected, remote_server = 192.168.123.119:34802, current_count = 4
[       OK ] basic.multi_get (1007 ms)
[ RUN      ] basic.multi_get_reverse
[       OK ] basic.multi_get_reverse (8 ms)
[ RUN      ] basic.multi_set_get_del
E2020-12-27 22:23:28.188 (1609079008188285692 58bfa)  mimic.io-thrd.363514: invalid sort keys: should not be empty
[       OK ] basic.multi_set_get_del (2 ms)
[ RUN      ] basic.set_get_del_async
[       OK ] basic.set_get_del_async (1 ms)
[ RUN      ] basic.multi_set_get_del_async
E2020-12-27 22:23:28.191 (1609079008191916945 58bfa)  mimic.io-thrd.363514: invalid sort keys: should not be empty
[       OK ] basic.multi_set_get_del_async (2 ms)
[ RUN      ] basic.scan_with_filter
[       OK ] basic.scan_with_filter (2 ms)
[ RUN      ] basic.full_scan_with_filter
D2020-12-27 22:23:28.1945 (1609079008194912925 58bfa)  mimic.io-thrd.363514: client session created, remote_server = 127.0.0.1:34601, current_count = 5
D2020-12-27 22:23:28.1945 (1609079008194997217 58bfc)  mimic.io-thrd.363516: client session connected, remote_server = 127.0.0.1:34601, current_count = 5
D2020-12-27 22:23:28.1956 (1609079008195181003 58bfa)  mimic.io-thrd.363514: client session created, remote_server = 192.168.123.119:34803, current_count = 6
D2020-12-27 22:23:28.1956 (1609079008195225511 58bfd)  mimic.io-thrd.363517: client session connected, remote_server = 192.168.123.119:34803, current_count = 6
[       OK ] basic.full_scan_with_filter (4 ms)
[----------] 8 tests from basic (1028 ms total)

[----------] Global test environment tear-down
[==========] 8 tests from 1 test case ran. (1028 ms total)
[  PASSED  ] 8 tests.
dsn exit with code 0
W2020-12-27 22:23:28.265 (1609079008265870797 58c21) unknown.io-thrd.363553:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
W2020-12-27 22:23:28.265 (1609079008265890784 58c21) unknown.io-thrd.363553:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX_ACK from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
D2020-12-27 22:23:28.2695 (1609079008269333142 58c21) unknown.io-thrd.363553: process(363553) start: 1609079008265, date: 2020-12-27 22:23:28.265
D2020-12-27 22:23:28.269 (1609079008269614652 58c21) unknown.io-thrd.363553: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:28.2691 (1609079008269621326 58c21) unknown.io-thrd.363553: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_DSN ...
D2020-12-27 22:23:28.269ÿ (1609079008269679551 58c21) unknown.io-thrd.363553: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:28.2691 (1609079008269790461 58c21) unknown.io-thrd.363553: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_DSN ...
D2020-12-27 22:23:28.269 (1609079008269904657 58c21) unknown.io-thrd.363553: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:28.2691 (1609079008269909525 58c21) unknown.io-thrd.363553: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:23:28.269ÿ (1609079008269948692 58c21) unknown.io-thrd.363553: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:28.2701 (1609079008270038480 58c21) unknown.io-thrd.363553: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:23:28.270 (1609079008270146831 58c21) unknown.io-thrd.363553: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:28.2701 (1609079008270151472 58c21) unknown.io-thrd.363553: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_RAW ...
D2020-12-27 22:23:28.270ÿ (1609079008270189568 58c21) unknown.io-thrd.363553: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:28.2701 (1609079008270279616 58c21) unknown.io-thrd.363553: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_RAW ...
D2020-12-27 22:23:28.270 (1609079008270287523 58c21) unknown.io-thrd.363553: === service_node=[mimic], primary_address=[192.168.123.119:1] ===
W2020-12-27 22:23:28.2701 (1609079008270332116 58c3a)  mimic.io-thrd.363578: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:23:28.2708 (1609079008270529675 58c21) unknown.io-thrd.363553: [mimic] thread pool [default] started, pool_code = THREAD_POOL_DEFAULT, worker_count = 8, worker_share_core = true, partitioned = false, ...
W2020-12-27 22:23:28.2701 (1609079008270571194 58c43)  mimic.io-thrd.363587: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:23:28.2704 (1609079008270674438 58c21) unknown.io-thrd.363553: [mimic] thread pool [THREAD_POOL_META_SERVER] started, pool_code = THREAD_POOL_META_SERVER, worker_count = 4, worker_share_core = true, partitioned = false, ...
D2020-12-27 22:23:28.270 (1609079008270745933 58c21) unknown.io-thrd.363553: MainThread: app_name=temp
Note: Google Test filter = incr.*
[==========] Running 11 tests from 1 test case.
[----------] Global test environment set-up.
[----------] 11 tests from incr
[ RUN      ] incr.unexist_key
D2020-12-27 22:23:28.2701 (1609079008270898354 58c21)  mimic.io-thrd.363553: client session created, remote_server = 127.0.0.1:34603, current_count = 1
D2020-12-27 22:23:28.2711 (1609079008271005567 58c24)  mimic.io-thrd.363556: client session connected, remote_server = 127.0.0.1:34603, current_count = 1
D2020-12-27 22:23:28.2712 (1609079008271197830 58c25)  mimic.io-thrd.363557: client session created, remote_server = 192.168.123.119:34601, current_count = 2
D2020-12-27 22:23:28.2712 (1609079008271278586 58c22)  mimic.io-thrd.363554: client session connected, remote_server = 192.168.123.119:34601, current_count = 2
D2020-12-27 22:23:28.2713 (1609079008271463988 58c3c)  mimic.default1.01008c2100030003: client session created, remote_server = 192.168.123.119:34801, current_count = 3
D2020-12-27 22:23:28.2713 (1609079008271557214 58c24)  mimic.io-thrd.363556: client session connected, remote_server = 192.168.123.119:34801, current_count = 3
[       OK ] incr.unexist_key (3 ms)
[ RUN      ] incr.empty_key
[       OK ] incr.empty_key (1 ms)
[ RUN      ] incr.negative_value
[       OK ] incr.negative_value (1 ms)
[ RUN      ] incr.increase_zero
[       OK ] incr.increase_zero (1 ms)
[ RUN      ] incr.multiple_increment
D2020-12-27 22:23:28.2764 (1609079008276169198 58c21)  mimic.io-thrd.363553: client session created, remote_server = 192.168.123.119:34803, current_count = 4
D2020-12-27 22:23:28.2764 (1609079008276243128 58c22)  mimic.io-thrd.363554: client session connected, remote_server = 192.168.123.119:34803, current_count = 4
[       OK ] incr.multiple_increment (1 ms)
[ RUN      ] incr.invalid_old_data
D2020-12-27 22:23:28.2775 (1609079008277580804 58c21)  mimic.io-thrd.363553: client session created, remote_server = 192.168.123.119:34802, current_count = 5
D2020-12-27 22:23:28.2775 (1609079008277641554 58c22)  mimic.io-thrd.363554: client session connected, remote_server = 192.168.123.119:34802, current_count = 5
[       OK ] incr.invalid_old_data (1 ms)
[ RUN      ] incr.out_of_range_old_data
[       OK ] incr.out_of_range_old_data (1 ms)
[ RUN      ] incr.up_overflow
[       OK ] incr.up_overflow (1 ms)
[ RUN      ] incr.down_overflow
[       OK ] incr.down_overflow (1 ms)
[ RUN      ] incr.preserve_ttl
[       OK ] incr.preserve_ttl (4003 ms)
[ RUN      ] incr.reset_ttl
[       OK ] incr.reset_ttl (4009 ms)
[----------] 11 tests from incr (8023 ms total)

[----------] Global test environment tear-down
[==========] 11 tests from 1 test case ran. (8023 ms total)
[  PASSED  ] 11 tests.
dsn exit with code 0
W2020-12-27 22:23:36.299 (1609079016299603556 58c48) unknown.io-thrd.363592:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
W2020-12-27 22:23:36.299 (1609079016299621996 58c48) unknown.io-thrd.363592:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX_ACK from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
D2020-12-27 22:23:36.3018 (1609079016301662123 58c48) unknown.io-thrd.363592: process(363592) start: 1609079016298, date: 2020-12-27 22:23:36.298
D2020-12-27 22:23:36.301 (1609079016301888071 58c48) unknown.io-thrd.363592: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:36.3011 (1609079016301893655 58c48) unknown.io-thrd.363592: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_DSN ...
D2020-12-27 22:23:36.301ÿ (1609079016301937376 58c48) unknown.io-thrd.363592: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:36.3021 (1609079016302018444 58c48) unknown.io-thrd.363592: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_DSN ...
D2020-12-27 22:23:36.302 (1609079016302108867 58c48) unknown.io-thrd.363592: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:36.3021 (1609079016302112743 58c48) unknown.io-thrd.363592: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:23:36.302ÿ (1609079016302142197 58c48) unknown.io-thrd.363592: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:36.3021 (1609079016302204591 58c48) unknown.io-thrd.363592: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:23:36.302 (1609079016302292504 58c48) unknown.io-thrd.363592: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:36.3021 (1609079016302295940 58c48) unknown.io-thrd.363592: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_RAW ...
D2020-12-27 22:23:36.302ÿ (1609079016302324886 58c48) unknown.io-thrd.363592: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:36.3021 (1609079016302390964 58c48) unknown.io-thrd.363592: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_RAW ...
D2020-12-27 22:23:36.302 (1609079016302396619 58c48) unknown.io-thrd.363592: === service_node=[mimic], primary_address=[192.168.123.119:1] ===
W2020-12-27 22:23:36.3021 (1609079016302428263 58c61)  mimic.io-thrd.363617: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:23:36.3028 (1609079016302609331 58c48) unknown.io-thrd.363592: [mimic] thread pool [default] started, pool_code = THREAD_POOL_DEFAULT, worker_count = 8, worker_share_core = true, partitioned = false, ...
W2020-12-27 22:23:36.3021 (1609079016302658043 58c6a)  mimic.io-thrd.363626: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:23:36.3024 (1609079016302730289 58c48) unknown.io-thrd.363592: [mimic] thread pool [THREAD_POOL_META_SERVER] started, pool_code = THREAD_POOL_META_SERVER, worker_count = 4, worker_share_core = true, partitioned = false, ...
D2020-12-27 22:23:36.302 (1609079016302797546 58c48) unknown.io-thrd.363592: MainThread: app_name=temp
Note: Google Test filter = check_and_set.*
[==========] Running 9 tests from 1 test case.
[----------] Global test environment set-up.
[----------] 9 tests from check_and_set
[ RUN      ] check_and_set.value_not_exist
D2020-12-27 22:23:36.3021 (1609079016302922126 58c48)  mimic.io-thrd.363592: client session created, remote_server = 127.0.0.1:34601, current_count = 1
D2020-12-27 22:23:36.3031 (1609079016303023192 58c49)  mimic.io-thrd.363593: client session connected, remote_server = 127.0.0.1:34601, current_count = 1
D2020-12-27 22:23:36.3032 (1609079016303204092 58c63)  mimic.default1.01008c4800030003: client session created, remote_server = 192.168.123.119:34803, current_count = 2
D2020-12-27 22:23:36.3032 (1609079016303268248 58c4c)  mimic.io-thrd.363596: client session connected, remote_server = 192.168.123.119:34803, current_count = 2
[       OK ] check_and_set.value_not_exist (5 ms)
[ RUN      ] check_and_set.value_exist
D2020-12-27 22:23:36.3073 (1609079016307573709 58c48)  mimic.io-thrd.363592: client session created, remote_server = 192.168.123.119:34802, current_count = 3
D2020-12-27 22:23:36.3073 (1609079016307639553 58c4b)  mimic.io-thrd.363595: client session connected, remote_server = 192.168.123.119:34802, current_count = 3
[       OK ] check_and_set.value_exist (3 ms)
[ RUN      ] check_and_set.value_not_empty
[       OK ] check_and_set.value_not_empty (3 ms)
[ RUN      ] check_and_set.value_match_anywhere
[       OK ] check_and_set.value_match_anywhere (6 ms)
[ RUN      ] check_and_set.value_match_prefix
D2020-12-27 22:23:36.3194 (1609079016319216241 58c48)  mimic.io-thrd.363592: client session created, remote_server = 192.168.123.119:34801, current_count = 4
D2020-12-27 22:23:36.3194 (1609079016319293893 58c4b)  mimic.io-thrd.363595: client session connected, remote_server = 192.168.123.119:34801, current_count = 4
[       OK ] check_and_set.value_match_prefix (5 ms)
[ RUN      ] check_and_set.value_match_postfix
[       OK ] check_and_set.value_match_postfix (5 ms)
[ RUN      ] check_and_set.value_bytes_compare
[       OK ] check_and_set.value_bytes_compare (6 ms)
[ RUN      ] check_and_set.value_int_compare
[       OK ] check_and_set.value_int_compare (7 ms)
[ RUN      ] check_and_set.invalid_type
E2020-12-27 22:23:36.3420 (1609079016342867385 58c48)  mimic.io-thrd.363592: invalid check type: 100
[       OK ] check_and_set.invalid_type (0 ms)
[----------] 9 tests from check_and_set (40 ms total)

[----------] Global test environment tear-down
[==========] 9 tests from 1 test case ran. (40 ms total)
[  PASSED  ] 9 tests.
dsn exit with code 0
W2020-12-27 22:23:36.349 (1609079016349051185 58c6f) unknown.io-thrd.363631:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
W2020-12-27 22:23:36.349 (1609079016349070379 58c6f) unknown.io-thrd.363631:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX_ACK from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
D2020-12-27 22:23:36.3518 (1609079016351115790 58c6f) unknown.io-thrd.363631: process(363631) start: 1609079016348, date: 2020-12-27 22:23:36.348
D2020-12-27 22:23:36.351 (1609079016351360841 58c6f) unknown.io-thrd.363631: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:36.3511 (1609079016351366329 58c6f) unknown.io-thrd.363631: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_DSN ...
D2020-12-27 22:23:36.351ÿ (1609079016351416582 58c6f) unknown.io-thrd.363631: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:36.3511 (1609079016351528192 58c6f) unknown.io-thrd.363631: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_DSN ...
D2020-12-27 22:23:36.351 (1609079016351623082 58c6f) unknown.io-thrd.363631: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:36.3511 (1609079016351626921 58c6f) unknown.io-thrd.363631: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:23:36.351ÿ (1609079016351657303 58c6f) unknown.io-thrd.363631: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:36.3511 (1609079016351739887 58c6f) unknown.io-thrd.363631: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:23:36.351 (1609079016351833083 58c6f) unknown.io-thrd.363631: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:36.3511 (1609079016351836698 58c6f) unknown.io-thrd.363631: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_RAW ...
D2020-12-27 22:23:36.351ÿ (1609079016351867079 58c6f) unknown.io-thrd.363631: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:23:36.3511 (1609079016351949742 58c6f) unknown.io-thrd.363631: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_RAW ...
D2020-12-27 22:23:36.351 (1609079016351955551 58c6f) unknown.io-thrd.363631: === service_node=[mimic], primary_address=[192.168.123.119:1] ===
W2020-12-27 22:23:36.3521 (1609079016352009733 58c88)  mimic.io-thrd.363656: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:23:36.3528 (1609079016352175221 58c6f) unknown.io-thrd.363631: [mimic] thread pool [default] started, pool_code = THREAD_POOL_DEFAULT, worker_count = 8, worker_share_core = true, partitioned = false, ...
W2020-12-27 22:23:36.3521 (1609079016352225699 58c91)  mimic.io-thrd.363665: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:23:36.3524 (1609079016352308490 58c6f) unknown.io-thrd.363631: [mimic] thread pool [THREAD_POOL_META_SERVER] started, pool_code = THREAD_POOL_META_SERVER, worker_count = 4, worker_share_core = true, partitioned = false, ...
D2020-12-27 22:23:36.352 (1609079016352374389 58c6f) unknown.io-thrd.363631: MainThread: app_name=temp
Note: Google Test filter = check_and_mutate.*
[==========] Running 12 tests from 1 test case.
[----------] Global test environment set-up.
[----------] 12 tests from check_and_mutate
[ RUN      ] check_and_mutate.value_not_exist
D2020-12-27 22:23:36.3521 (1609079016352510705 58c6f)  mimic.io-thrd.363631: client session created, remote_server = 127.0.0.1:34601, current_count = 1
D2020-12-27 22:23:36.3521 (1609079016352595957 58c70)  mimic.io-thrd.363632: client session connected, remote_server = 127.0.0.1:34601, current_count = 1
D2020-12-27 22:23:36.3522 (1609079016352797644 58c8a)  mimic.default1.01008c6f00030003: client session created, remote_server = 192.168.123.119:34803, current_count = 2
D2020-12-27 22:23:36.3522 (1609079016352863146 58c72)  mimic.io-thrd.363634: client session connected, remote_server = 192.168.123.119:34803, current_count = 2
[       OK ] check_and_mutate.value_not_exist (5 ms)
[ RUN      ] check_and_mutate.value_exist
D2020-12-27 22:23:36.3573 (1609079016357250669 58c6f)  mimic.io-thrd.363631: client session created, remote_server = 192.168.123.119:34802, current_count = 3
D2020-12-27 22:23:36.3573 (1609079016357325799 58c70)  mimic.io-thrd.363632: client session connected, remote_server = 192.168.123.119:34802, current_count = 3
[       OK ] check_and_mutate.value_exist (3 ms)
[ RUN      ] check_and_mutate.value_not_empty
[       OK ] check_and_mutate.value_not_empty (3 ms)
[ RUN      ] check_and_mutate.value_match_anywhere
[       OK ] check_and_mutate.value_match_anywhere (5 ms)
[ RUN      ] check_and_mutate.value_match_prefix
[       OK ] check_and_mutate.value_match_prefix (6 ms)
[ RUN      ] check_and_mutate.value_match_postfix
[       OK ] check_and_mutate.value_match_postfix (6 ms)
[ RUN      ] check_and_mutate.value_bytes_compare
[       OK ] check_and_mutate.value_bytes_compare (6 ms)
[ RUN      ] check_and_mutate.value_int_compare
[       OK ] check_and_mutate.value_int_compare (7 ms)
[ RUN      ] check_and_mutate.invalid_type
E2020-12-27 22:23:36.3930 (1609079016393573232 58c6f)  mimic.io-thrd.363631: invalid check type: 100
[       OK ] check_and_mutate.invalid_type (0 ms)
[ RUN      ] check_and_mutate.set_del
[       OK ] check_and_mutate.set_del (1 ms)
[ RUN      ] check_and_mutate.multi_get_mutations
[       OK ] check_and_mutate.multi_get_mutations (12003 ms)
[ RUN      ] check_and_mutate.expire_seconds
D2020-12-27 22:23:48.3974 (1609079028397858175 58c6f)  mimic.io-thrd.363631: client session created, remote_server = 192.168.123.119:34801, current_count = 4
D2020-12-27 22:23:48.3984 (1609079028398062309 58c73)  mimic.io-thrd.363635: client session connected, remote_server = 192.168.123.119:34801, current_count = 4
[       OK ] check_and_mutate.expire_seconds (12004 ms)
[----------] 12 tests from check_and_mutate (24049 ms total)

[----------] Global test environment tear-down
[==========] 12 tests from 1 test case ran. (24049 ms total)
[  PASSED  ] 12 tests.
dsn exit with code 0
W2020-12-27 22:24:00.412 (1609079040412124515 58c9d) unknown.io-thrd.363677:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
W2020-12-27 22:24:00.412 (1609079040412162033 58c9d) unknown.io-thrd.363677:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX_ACK from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
D2020-12-27 22:24:00.4161 (1609079040416666847 58c9d) unknown.io-thrd.363677: process(363677) start: 1609079040411, date: 2020-12-27 22:24:00.411
D2020-12-27 22:24:00.417 (1609079040417057348 58c9d) unknown.io-thrd.363677: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:24:00.4171 (1609079040417068189 58c9d) unknown.io-thrd.363677: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_DSN ...
D2020-12-27 22:24:00.417ÿ (1609079040417157221 58c9d) unknown.io-thrd.363677: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:24:00.4171 (1609079040417338452 58c9d) unknown.io-thrd.363677: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_DSN ...
D2020-12-27 22:24:00.417 (1609079040417510886 58c9d) unknown.io-thrd.363677: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:24:00.4171 (1609079040417519010 58c9d) unknown.io-thrd.363677: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:24:00.417ÿ (1609079040417582096 58c9d) unknown.io-thrd.363677: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:24:00.4171 (1609079040417721828 58c9d) unknown.io-thrd.363677: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:24:00.417 (1609079040417883275 58c9d) unknown.io-thrd.363677: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:24:00.4171 (1609079040417890731 58c9d) unknown.io-thrd.363677: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_RAW ...
D2020-12-27 22:24:00.417ÿ (1609079040417951605 58c9d) unknown.io-thrd.363677: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:24:00.4181 (1609079040418083835 58c9d) unknown.io-thrd.363677: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_RAW ...
D2020-12-27 22:24:00.418 (1609079040418095270 58c9d) unknown.io-thrd.363677: === service_node=[mimic], primary_address=[192.168.123.119:1] ===
W2020-12-27 22:24:00.4181 (1609079040418174923 58cb6)  mimic.io-thrd.363702: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:24:00.4188 (1609079040418479164 58c9d) unknown.io-thrd.363677: [mimic] thread pool [default] started, pool_code = THREAD_POOL_DEFAULT, worker_count = 8, worker_share_core = true, partitioned = false, ...
W2020-12-27 22:24:00.4181 (1609079040418525809 58cbf)  mimic.io-thrd.363711: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:24:00.4184 (1609079040418785806 58c9d) unknown.io-thrd.363677: [mimic] thread pool [THREAD_POOL_META_SERVER] started, pool_code = THREAD_POOL_META_SERVER, worker_count = 4, worker_share_core = true, partitioned = false, ...
D2020-12-27 22:24:00.418 (1609079040418875541 58c9d) unknown.io-thrd.363677: MainThread: app_name=temp
Note: Google Test filter = scan.*
[==========] Running 8 tests from 1 test case.
[----------] Global test environment set-up.
[----------] 8 tests from scan
D2020-12-27 22:24:00.418 (1609079040418994144 58c9d) unknown.io-thrd.363677: SetUp...
D2020-12-27 22:24:00.4180 (1609079040418999807 58c9d) unknown.io-thrd.363677: CLEARING_DATABASE...
D2020-12-27 22:24:00.4191 (1609079040419063872 58c9d)  mimic.io-thrd.363677: client session created, remote_server = 127.0.0.1:34603, current_count = 1
D2020-12-27 22:24:00.4191 (1609079040419176315 58c9e)  mimic.io-thrd.363678: client session connected, remote_server = 127.0.0.1:34603, current_count = 1
D2020-12-27 22:24:00.4192 (1609079040419386405 58ca1)  mimic.io-thrd.363681: client session created, remote_server = 192.168.123.119:34601, current_count = 2
D2020-12-27 22:24:00.4192 (1609079040419498173 58ca0)  mimic.io-thrd.363680: client session connected, remote_server = 192.168.123.119:34601, current_count = 2
D2020-12-27 22:24:00.4203 (1609079040420100757 58cb9)  mimic.default2.01008c9d00030005: client session created, remote_server = 192.168.123.119:34803, current_count = 3
D2020-12-27 22:24:00.4203 (1609079040420200564 58c9f)  mimic.io-thrd.363679: client session connected, remote_server = 192.168.123.119:34803, current_count = 3
D2020-12-27 22:24:00.4204 (1609079040420444308 58cba)  mimic.default3.01008c9d00030003: client session created, remote_server = 192.168.123.119:34802, current_count = 4
D2020-12-27 22:24:00.4204 (1609079040420523830 58ca1)  mimic.io-thrd.363681: client session connected, remote_server = 192.168.123.119:34802, current_count = 4
D2020-12-27 22:24:00.4205 (1609079040420755632 58cbb)  mimic.default4.0101000300000001: client session created, remote_server = 192.168.123.119:34801, current_count = 5
D2020-12-27 22:24:00.4205 (1609079040420834961 58c9e)  mimic.io-thrd.363678: client session connected, remote_server = 192.168.123.119:34801, current_count = 5
D2020-12-27 22:24:00.425 (1609079040425047498 58c9d)  mimic.io-thrd.363677: Database cleared.
D2020-12-27 22:24:00.425 (1609079040425056523 58c9d)  mimic.io-thrd.363677: FILLING_DATABASE...
D2020-12-27 22:24:03.110 (1609079043110702124 58c9d)  mimic.io-thrd.363677: Database filled.
[ RUN      ] scan.ALL_SORT_KEY
D2020-12-27 22:24:03.110 (1609079043110723372 58c9d)  mimic.io-thrd.363677: TESTING_HASH_SCAN, ALL SORT_KEYS ....
[       OK ] scan.ALL_SORT_KEY (3 ms)
[ RUN      ] scan.BOUND_INCLUSIVE
D2020-12-27 22:24:03.113 (1609079043113865723 58c9d)  mimic.io-thrd.363677: TESTING_HASH_SCAN, [start, stop]...
[       OK ] scan.BOUND_INCLUSIVE (1 ms)
[ RUN      ] scan.BOUND_EXCLUSIVE
D2020-12-27 22:24:03.114 (1609079043114944300 58c9d)  mimic.io-thrd.363677: TESTING_HASH_SCAN, (start, stop)...
[       OK ] scan.BOUND_EXCLUSIVE (1 ms)
[ RUN      ] scan.ONE_POINT
D2020-12-27 22:24:03.115 (1609079043115396183 58c9d)  mimic.io-thrd.363677: TESTING_HASH_SCAN, [start, start]...
[       OK ] scan.ONE_POINT (0 ms)
[ RUN      ] scan.HALF_INCLUSIVE
D2020-12-27 22:24:03.115 (1609079043115511652 58c9d)  mimic.io-thrd.363677: TESTING_HASH_SCAN, [start, start)...
[       OK ] scan.HALF_INCLUSIVE (0 ms)
[ RUN      ] scan.VOID_SPAN
D2020-12-27 22:24:03.115 (1609079043115527255 58c9d)  mimic.io-thrd.363677: TESTING_HASH_SCAN, [stop, start]...
[       OK ] scan.VOID_SPAN (0 ms)
[ RUN      ] scan.OVERALL
D2020-12-27 22:24:03.115 (1609079043115544139 58c9d)  mimic.io-thrd.363677: TEST OVERALL_SCAN...
[       OK ] scan.OVERALL (32 ms)
[ RUN      ] scan.ITERATION_TIME_LIMIT
[       OK ] scan.ITERATION_TIME_LIMIT (62735 ms)
D2020-12-27 22:25:05.882 (1609079105882988152 58c9d)  mimic.io-thrd.363677: TearDown...
D2020-12-27 22:25:05.882d (1609079105882992743 58c9d)  mimic.io-thrd.363677: CLEARING_DATABASE...
D2020-12-27 22:25:12.210 (1609079112210433934 58c9d)  mimic.io-thrd.363677: Database cleared.
[----------] 8 tests from scan (62772 ms total)

[----------] Global test environment tear-down
[==========] 8 tests from 1 test case ran. (71792 ms total)
[  PASSED  ] 8 tests.
dsn exit with code 0
W2020-12-27 22:25:12.218 (1609079112218283551 58cf6) unknown.io-thrd.363766:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
W2020-12-27 22:25:12.218 (1609079112218302991 58cf6) unknown.io-thrd.363766:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX_ACK from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
D2020-12-27 22:25:12.2207 (1609079112220416976 58cf6) unknown.io-thrd.363766: process(363766) start: 1609079112217, date: 2020-12-27 22:25:12.217
D2020-12-27 22:25:12.220 (1609079112220655622 58cf6) unknown.io-thrd.363766: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:25:12.2201 (1609079112220661002 58cf6) unknown.io-thrd.363766: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_DSN ...
D2020-12-27 22:25:12.220ÿ (1609079112220705353 58cf6) unknown.io-thrd.363766: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:25:12.2201 (1609079112220786884 58cf6) unknown.io-thrd.363766: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_DSN ...
D2020-12-27 22:25:12.220 (1609079112220875385 58cf6) unknown.io-thrd.363766: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:25:12.2201 (1609079112220878926 58cf6) unknown.io-thrd.363766: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:25:12.220ÿ (1609079112220918364 58cf6) unknown.io-thrd.363766: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:25:12.2211 (1609079112221000416 58cf6) unknown.io-thrd.363766: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:25:12.221 (1609079112221097498 58cf6) unknown.io-thrd.363766: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:25:12.2211 (1609079112221101007 58cf6) unknown.io-thrd.363766: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_RAW ...
D2020-12-27 22:25:12.221ÿ (1609079112221130243 58cf6) unknown.io-thrd.363766: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:25:12.2211 (1609079112221197501 58cf6) unknown.io-thrd.363766: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_RAW ...
D2020-12-27 22:25:12.221 (1609079112221203603 58cf6) unknown.io-thrd.363766: === service_node=[mimic], primary_address=[192.168.123.119:1] ===
W2020-12-27 22:25:12.2211 (1609079112221236244 58d0f)  mimic.io-thrd.363791: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:25:12.2218 (1609079112221391764 58cf6) unknown.io-thrd.363766: [mimic] thread pool [default] started, pool_code = THREAD_POOL_DEFAULT, worker_count = 8, worker_share_core = true, partitioned = false, ...
W2020-12-27 22:25:12.2211 (1609079112221427351 58d18)  mimic.io-thrd.363800: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:25:12.2214 (1609079112221491762 58cf6) unknown.io-thrd.363766: [mimic] thread pool [THREAD_POOL_META_SERVER] started, pool_code = THREAD_POOL_META_SERVER, worker_count = 4, worker_share_core = true, partitioned = false, ...
D2020-12-27 22:25:12.221 (1609079112221549526 58cf6) unknown.io-thrd.363766: MainThread: app_name=temp
Note: Google Test filter = ttl.*
[==========] Running 2 tests from 1 test case.
[----------] Global test environment set-up.
[----------] 2 tests from ttl
[ RUN      ] ttl.set_without_default_ttl
D2020-12-27 22:25:12.2211 (1609079112221679364 58cf6)  mimic.io-thrd.363766: client session created, remote_server = 127.0.0.1:34601, current_count = 1
D2020-12-27 22:25:12.2211 (1609079112221757379 58cf8)  mimic.io-thrd.363768: client session connected, remote_server = 127.0.0.1:34601, current_count = 1
D2020-12-27 22:26:17.2502 (1609079177250566108 58cf6)  mimic.io-thrd.363766: client session created, remote_server = 127.0.0.1:34602, current_count = 2
D2020-12-27 22:26:17.2502 (1609079177250798106 58cf9)  mimic.io-thrd.363769: client session connected, remote_server = 127.0.0.1:34602, current_count = 2
D2020-12-27 22:26:17.2513 (1609079177251144890 58cf8)  mimic.io-thrd.363768: client session created, remote_server = 192.168.123.119:34601, current_count = 3
D2020-12-27 22:26:17.2513 (1609079177251300715 58cf7)  mimic.io-thrd.363767: client session connected, remote_server = 192.168.123.119:34601, current_count = 3
D2020-12-27 22:26:17.2514 (1609079177251764501 58d13)  mimic.default3.01008cf600030008: client session created, remote_server = 192.168.123.119:34802, current_count = 4
D2020-12-27 22:26:17.2514 (1609079177251922744 58cf8)  mimic.io-thrd.363768: client session connected, remote_server = 192.168.123.119:34802, current_count = 4
[       OK ] ttl.set_without_default_ttl (140044 ms)
[ RUN      ] ttl.set_with_default_ttl
[       OK ] ttl.set_with_default_ttl (140020 ms)
[----------] 2 tests from ttl (280064 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test case ran. (280064 ms total)
[  PASSED  ] 2 tests.
dsn exit with code 0
W2020-12-27 22:29:52.300 (1609079392300079767 59484) unknown.io-thrd.365700:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
W2020-12-27 22:29:52.300 (1609079392300127845 59484) unknown.io-thrd.365700:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX_ACK from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
D2020-12-27 22:29:52.3038 (1609079392303184719 59484) unknown.io-thrd.365700: process(365700) start: 1609079392298, date: 2020-12-27 22:29:52.298
D2020-12-27 22:29:52.303 (1609079392303411038 59484) unknown.io-thrd.365700: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:29:52.3031 (1609079392303416033 59484) unknown.io-thrd.365700: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_DSN ...
D2020-12-27 22:29:52.303ÿ (1609079392303461749 59484) unknown.io-thrd.365700: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:29:52.3031 (1609079392303585235 59484) unknown.io-thrd.365700: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_DSN ...
D2020-12-27 22:29:52.303 (1609079392303728158 59484) unknown.io-thrd.365700: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:29:52.3031 (1609079392303731745 59484) unknown.io-thrd.365700: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:29:52.303ÿ (1609079392303760426 59484) unknown.io-thrd.365700: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:29:52.3031 (1609079392303842828 59484) unknown.io-thrd.365700: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:29:52.303 (1609079392303974109 59484) unknown.io-thrd.365700: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:29:52.3031 (1609079392303977768 59484) unknown.io-thrd.365700: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_RAW ...
D2020-12-27 22:29:52.304ÿ (1609079392304022333 59484) unknown.io-thrd.365700: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:29:52.3041 (1609079392304114157 59484) unknown.io-thrd.365700: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_RAW ...
D2020-12-27 22:29:52.304 (1609079392304147445 59484) unknown.io-thrd.365700: === service_node=[mimic], primary_address=[192.168.123.119:1] ===
W2020-12-27 22:29:52.3041 (1609079392304213446 5949d)  mimic.io-thrd.365725: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:29:52.3048 (1609079392304700469 59484) unknown.io-thrd.365700: [mimic] thread pool [default] started, pool_code = THREAD_POOL_DEFAULT, worker_count = 8, worker_share_core = true, partitioned = false, ...
W2020-12-27 22:29:52.3041 (1609079392304736998 594a6)  mimic.io-thrd.365734: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:29:52.3044 (1609079392304818522 59484) unknown.io-thrd.365700: [mimic] thread pool [THREAD_POOL_META_SERVER] started, pool_code = THREAD_POOL_META_SERVER, worker_count = 4, worker_share_core = true, partitioned = false, ...
D2020-12-27 22:29:52.304 (1609079392304874490 59484) unknown.io-thrd.365700: MainThread: app_name=temp
Note: Google Test filter = lost_log.*
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from lost_log
[ RUN      ] lost_log.slog
create app table_for_lost_log
D2020-12-27 22:29:52.3051 (1609079392305007008 59484)  mimic.io-thrd.365700: client session created, remote_server = 127.0.0.1:34601, current_count = 1
D2020-12-27 22:29:52.3051 (1609079392305087610 59485)  mimic.io-thrd.365701: client session connected, remote_server = 127.0.0.1:34601, current_count = 1
create app table_for_lost_log succeed, waiting for app ready
table_for_lost_log not ready yet, still waiting... (0/4)
table_for_lost_log not ready yet, still waiting... (0/4)
table_for_lost_log is ready now: (4/4)
table_for_lost_log is ready now!
D2020-12-27 22:29:58.3132 (1609079398313141207 5949e)  mimic.default0.010094840003000f: client session created, remote_server = 192.168.123.119:34801, current_count = 2
D2020-12-27 22:29:58.3132 (1609079398313432231 59486)  mimic.io-thrd.365702: client session connected, remote_server = 192.168.123.119:34801, current_count = 2
D2020-12-27 22:29:58.3143 (1609079398314632342 59484)  mimic.io-thrd.365700: client session created, remote_server = 192.168.123.119:34802, current_count = 3
D2020-12-27 22:29:58.3143 (1609079398314844490 59485)  mimic.io-thrd.365701: client session connected, remote_server = 192.168.123.119:34802, current_count = 3
D2020-12-27 22:29:58.3154 (1609079398315804875 59484)  mimic.io-thrd.365700: client session created, remote_server = 192.168.123.119:34803, current_count = 4
D2020-12-27 22:29:58.3154 (1609079398315983425 59486)  mimic.io-thrd.365702: client session connected, remote_server = 192.168.123.119:34803, current_count = 4
============
start global_env()
meta1 pid: 361298
meta1 dir: /home/smilencer/Code/incubator-pegasus/onebox/meta1
project root: /home/smilencer/Code/incubator-pegasus
working dir: /home/smilencer/Code/incubator-pegasus/src/builder/test/function_test
D2020-12-27 22:30:01.745 (1609079401745664431 59484)  mimic.io-thrd.365700: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
get ip: 192.168.123.119
first stop the cluster
D2020-12-27 22:30:01.771 (1609079401771675637 59488)  mimic.io-thrd.365704: asio read from 127.0.0.1:34601 failed: End of file
D2020-12-27 22:30:01.7713 (1609079401771692441 59488)  mimic.io-thrd.365704: client session disconnected, remote_server = 127.0.0.1:34601, current_count = 3
truncate slog for replica1
ls -lcrt onebox/replica1/data/replica/slog | tail -n 1 | awk '{print $5,$9}'
truncate file with size: (log.1.0, 21350580)
truncate -s 7116860 onebox/replica1/data/replica/slog/log.1.0
D2020-12-27 22:30:01.792 (1609079401792579400 59488)  mimic.io-thrd.365704: asio read from 192.168.123.119:34803 failed: End of file
D2020-12-27 22:30:01.7922 (1609079401792589233 59488)  mimic.io-thrd.365704: client session disconnected, remote_server = 192.168.123.119:34803, current_count = 2
D2020-12-27 22:30:01.792 (1609079401792789929 59486)  mimic.io-thrd.365702: asio read from 192.168.123.119:34802 failed: End of file
D2020-12-27 22:30:01.7921 (1609079401792795808 59486)  mimic.io-thrd.365702: client session disconnected, remote_server = 192.168.123.119:34802, current_count = 1
D2020-12-27 22:30:01.796 (1609079401796138502 59487)  mimic.io-thrd.365703: asio read from 192.168.123.119:34801 failed: End of file
D2020-12-27 22:30:01.7960 (1609079401796151108 59487)  mimic.io-thrd.365703: client session disconnected, remote_server = 192.168.123.119:34801, current_count = 0
after truncated file size: 7116860
restart onebox again
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Starting zookeeper ... already running as process 361261.
Zookeeper started at port 22181
starting server
cd /home/smilencer/Code/incubator-pegasus/onebox/meta1 && /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta &>result &
smilenc+  366045  366006  0 22:30 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta2 && /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta &>result &
smilenc+  366053  366006  0 22:30 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta3 && /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta &>result &
smilenc+  366095  366006  0 22:30 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/replica1 && /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica &>result &
smilenc+  366138  366006  0 22:30 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica2 && /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica &>result &
smilenc+  366180  366006  0 22:30 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica3 && /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica &>result &
smilenc+  366252  366006  0 22:30 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
D2020-12-27 22:30:04.9941 (1609079404994936436 59484)  mimic.io-thrd.365700: client session created, remote_server = 127.0.0.1:34601, current_count = 1
D2020-12-27 22:30:04.9951 (1609079404995065255 59485)  mimic.io-thrd.365701: client session connected, remote_server = 127.0.0.1:34601, current_count = 1
table_for_lost_log not ready yet, still waiting... (2/4)
table_for_lost_log not ready yet, still waiting... (2/4)
table_for_lost_log not ready yet, still waiting... (2/4)
table_for_lost_log not ready yet, still waiting... (1/4)
table_for_lost_log not ready yet, still waiting... (1/4)
table_for_lost_log not ready yet, still waiting... (3/4)
table_for_lost_log not ready yet, still waiting... (3/4)
table_for_lost_log not ready yet, still waiting... (3/4)
table_for_lost_log not ready yet, still waiting... (3/4)
table_for_lost_log is ready now: (4/4)
check keys wrote before
D2020-12-27 22:30:23.1 (1609079423001953944 59484)  mimic.io-thrd.365700: client session created, remote_server = 192.168.123.119:34801, current_count = 2
D2020-12-27 22:30:23.2 (1609079423002124953 59485)  mimic.io-thrd.365701: client session connected, remote_server = 192.168.123.119:34801, current_count = 2
D2020-12-27 22:30:23.2 (1609079423002396009 594a4)  mimic.default6.0100948400034e4d: clear partition configuration cache 3.3 due to access failure ERR_INVALID_STATE
D2020-12-27 22:30:23.11 (1609079423011099541 5949e)  mimic.default0.0101000400000002: client session created, remote_server = 192.168.123.119:34802, current_count = 3
D2020-12-27 22:30:23.11 (1609079423011292328 59486)  mimic.io-thrd.365702: client session connected, remote_server = 192.168.123.119:34802, current_count = 3
D2020-12-27 22:30:23.12 (1609079423012483380 59484)  mimic.io-thrd.365700: client session created, remote_server = 192.168.123.119:34803, current_count = 4
D2020-12-27 22:30:23.12 (1609079423012740715 59485)  mimic.io-thrd.365701: client session connected, remote_server = 192.168.123.119:34803, current_count = 4
D2020-12-27 22:30:23.13 (1609079423013551086 5949f)  mimic.default1.0100948400034e53: clear partition configuration cache 3.0 due to access failure ERR_INVALID_STATE
[       OK ] lost_log.slog (31368 ms)
[----------] 1 test from lost_log (31368 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (31368 ms total)
[  PASSED  ] 1 test.
dsn exit with code 0
W2020-12-27 22:30:23.679 (1609079423679954654 59e6f) unknown.io-thrd.368239:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
W2020-12-27 22:30:23.679 (1609079423679974967 59e6f) unknown.io-thrd.368239:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX_ACK from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
D2020-12-27 22:30:23.6829 (1609079423682079863 59e6f) unknown.io-thrd.368239: process(368239) start: 1609079423679, date: 2020-12-27 22:30:23.679
D2020-12-27 22:30:23.682 (1609079423682366015 59e6f) unknown.io-thrd.368239: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:30:23.6821 (1609079423682372016 59e6f) unknown.io-thrd.368239: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_DSN ...
D2020-12-27 22:30:23.682ÿ (1609079423682424494 59e6f) unknown.io-thrd.368239: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:30:23.6821 (1609079423682522221 59e6f) unknown.io-thrd.368239: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_DSN ...
D2020-12-27 22:30:23.682 (1609079423682630949 59e6f) unknown.io-thrd.368239: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:30:23.6821 (1609079423682634756 59e6f) unknown.io-thrd.368239: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:30:23.682ÿ (1609079423682665185 59e6f) unknown.io-thrd.368239: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:30:23.6821 (1609079423682736957 59e6f) unknown.io-thrd.368239: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:30:23.682 (1609079423682818860 59e6f) unknown.io-thrd.368239: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:30:23.6821 (1609079423682822359 59e6f) unknown.io-thrd.368239: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_RAW ...
D2020-12-27 22:30:23.682ÿ (1609079423682851872 59e6f) unknown.io-thrd.368239: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:30:23.6821 (1609079423682934927 59e6f) unknown.io-thrd.368239: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_RAW ...
D2020-12-27 22:30:23.682 (1609079423682942290 59e6f) unknown.io-thrd.368239: === service_node=[mimic], primary_address=[192.168.123.119:1] ===
W2020-12-27 22:30:23.6821 (1609079423682977180 59e88)  mimic.io-thrd.368264: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:30:23.6838 (1609079423683145887 59e6f) unknown.io-thrd.368239: [mimic] thread pool [default] started, pool_code = THREAD_POOL_DEFAULT, worker_count = 8, worker_share_core = true, partitioned = false, ...
W2020-12-27 22:30:23.6831 (1609079423683180891 59e91)  mimic.io-thrd.368273: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:30:23.6834 (1609079423683254167 59e6f) unknown.io-thrd.368239: [mimic] thread pool [THREAD_POOL_META_SERVER] started, pool_code = THREAD_POOL_META_SERVER, worker_count = 4, worker_share_core = true, partitioned = false, ...
D2020-12-27 22:30:23.683 (1609079423683314305 59e6f) unknown.io-thrd.368239: MainThread: app_name=temp
Note: Google Test filter = drop_and_recall.*
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from drop_and_recall
[ RUN      ] drop_and_recall.simple
create app simple_table
D2020-12-27 22:30:23.6831 (1609079423683454432 59e6f)  mimic.io-thrd.368239: client session created, remote_server = 127.0.0.1:34602, current_count = 1
D2020-12-27 22:30:23.6831 (1609079423683556560 59e70)  mimic.io-thrd.368240: client session connected, remote_server = 127.0.0.1:34602, current_count = 1
D2020-12-27 22:30:23.6832 (1609079423683789451 59e71)  mimic.io-thrd.368241: client session created, remote_server = 192.168.123.119:34601, current_count = 2
D2020-12-27 22:30:23.6832 (1609079423683860345 59e72)  mimic.io-thrd.368242: client session connected, remote_server = 192.168.123.119:34601, current_count = 2
create app simple_table succeed, waiting for app ready
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (3/4)
simple_table not ready yet, still waiting... (3/4)
simple_table not ready yet, still waiting... (3/4)
simple_table not ready yet, still waiting... (3/4)
simple_table not ready yet, still waiting... (3/4)
simple_table is ready now: (4/4)
simple_table is ready now!
app_id = 4
write 10000 keys
D2020-12-27 22:30:43.6983 (1609079443698641575 59e6f)  mimic.io-thrd.368239: client session created, remote_server = 127.0.0.1:34603, current_count = 3
D2020-12-27 22:30:43.6983 (1609079443698861095 59e71)  mimic.io-thrd.368241: client session connected, remote_server = 127.0.0.1:34603, current_count = 3
D2020-12-27 22:30:43.6994 (1609079443699666700 59e8f)  mimic.default6.01009e6f00030027: client session created, remote_server = 192.168.123.119:34801, current_count = 4
D2020-12-27 22:30:43.6994 (1609079443699836891 59e72)  mimic.io-thrd.368242: client session connected, remote_server = 192.168.123.119:34801, current_count = 4
D2020-12-27 22:30:43.7015 (1609079443701107968 59e6f)  mimic.io-thrd.368239: client session created, remote_server = 192.168.123.119:34802, current_count = 5
D2020-12-27 22:30:43.7015 (1609079443701278065 59e70)  mimic.io-thrd.368240: client session connected, remote_server = 192.168.123.119:34802, current_count = 5
D2020-12-27 22:30:43.7026 (1609079443702319570 59e6f)  mimic.io-thrd.368239: client session created, remote_server = 192.168.123.119:34803, current_count = 6
D2020-12-27 22:30:43.7026 (1609079443702491021 59e72)  mimic.io-thrd.368242: client session connected, remote_server = 192.168.123.119:34803, current_count = 6
drop table simple_table
D2020-12-27 22:31:05.1710 (1609079465171015363 59e8e)  mimic.default5.01009e6f00034e70: clear partition configuration cache 4.0 due to access failure ERR_OBJECT_NOT_FOUND
E2020-12-27 22:31:05.1790 (1609079465179714630 59e89)  mimic.default0.0101000600000003: simple_table.client: query config reply, gpid = 4.0, err = ERR_OBJECT_NOT_FOUND
partition 0 is removed from server
D2020-12-27 22:31:05.1801 (1609079465180341510 59e8a)  mimic.default1.01009e6f00034e72: clear partition configuration cache 4.1 due to access failure ERR_OBJECT_NOT_FOUND
E2020-12-27 22:31:05.1891 (1609079465189246031 59e8c)  mimic.default3.0101000700000002: simple_table.client: query config reply, gpid = 4.1, err = ERR_OBJECT_NOT_FOUND
partition 1 is removed from server
D2020-12-27 22:31:05.1892 (1609079465189869989 59e8e)  mimic.default5.01009e6f00034e74: clear partition configuration cache 4.2 due to access failure ERR_OBJECT_NOT_FOUND
E2020-12-27 22:31:05.1982 (1609079465198633917 59e89)  mimic.default0.0101000600000006: simple_table.client: query config reply, gpid = 4.2, err = ERR_OBJECT_NOT_FOUND
partition 2 is removed from server
D2020-12-27 22:31:05.1993 (1609079465199257164 59e8a)  mimic.default1.01009e6f00034e76: clear partition configuration cache 4.3 due to access failure ERR_OBJECT_NOT_FOUND
E2020-12-27 22:31:05.2083 (1609079465208106932 59e8c)  mimic.default3.0101000700000005: simple_table.client: query config reply, gpid = 4.3, err = ERR_OBJECT_NOT_FOUND
partition 3 is removed from server
start to recall table 
recall app ok, id(4), name(simple_table), partition_count(4), wait it ready
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (0/4)
simple_table not ready yet, still waiting... (1/4)
simple_table not ready yet, still waiting... (1/4)
simple_table not ready yet, still waiting... (1/4)
simple_table not ready yet, still waiting... (1/4)
simple_table not ready yet, still waiting... (3/4)
simple_table is ready now: (4/4)
[       OK ] drop_and_recall.simple (92210 ms)
[----------] 1 test from drop_and_recall (92210 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (92210 ms total)
[  PASSED  ] 1 test.
dsn exit with code 0
W2020-12-27 22:31:55.900 (1609079515900848076 5a4a5) unknown.io-thrd.369829:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
W2020-12-27 22:31:55.900 (1609079515900867957 5a4a5) unknown.io-thrd.369829:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX_ACK from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
D2020-12-27 22:31:55.9030 (1609079515903015373 5a4a5) unknown.io-thrd.369829: process(369829) start: 1609079515900, date: 2020-12-27 22:31:55.900
D2020-12-27 22:31:55.903 (1609079515903258686 5a4a5) unknown.io-thrd.369829: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:31:55.9031 (1609079515903263787 5a4a5) unknown.io-thrd.369829: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_DSN ...
D2020-12-27 22:31:55.903ÿ (1609079515903307109 5a4a5) unknown.io-thrd.369829: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:31:55.9031 (1609079515903391677 5a4a5) unknown.io-thrd.369829: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_DSN ...
D2020-12-27 22:31:55.903 (1609079515903475251 5a4a5) unknown.io-thrd.369829: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:31:55.9031 (1609079515903479138 5a4a5) unknown.io-thrd.369829: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:31:55.903ÿ (1609079515903523364 5a4a5) unknown.io-thrd.369829: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:31:55.9031 (1609079515903607063 5a4a5) unknown.io-thrd.369829: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:31:55.903 (1609079515903697709 5a4a5) unknown.io-thrd.369829: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:31:55.9031 (1609079515903701360 5a4a5) unknown.io-thrd.369829: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_RAW ...
D2020-12-27 22:31:55.903ÿ (1609079515903731375 5a4a5) unknown.io-thrd.369829: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:31:55.9031 (1609079515903812465 5a4a5) unknown.io-thrd.369829: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_RAW ...
D2020-12-27 22:31:55.903 (1609079515903818116 5a4a5) unknown.io-thrd.369829: === service_node=[mimic], primary_address=[192.168.123.119:1] ===
W2020-12-27 22:31:55.9031 (1609079515903857634 5a4be)  mimic.io-thrd.369854: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:31:55.9058 (1609079515905063700 5a4a5) unknown.io-thrd.369829: [mimic] thread pool [default] started, pool_code = THREAD_POOL_DEFAULT, worker_count = 8, worker_share_core = true, partitioned = false, ...
W2020-12-27 22:31:55.9051 (1609079515905318833 5a4c7)  mimic.io-thrd.369863: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:31:55.9054 (1609079515905870446 5a4a5) unknown.io-thrd.369829: [mimic] thread pool [THREAD_POOL_META_SERVER] started, pool_code = THREAD_POOL_META_SERVER, worker_count = 4, worker_share_core = true, partitioned = false, ...
D2020-12-27 22:31:55.905 (1609079515905946287 5a4a5) unknown.io-thrd.369829: MainThread: app_name=temp
Note: Google Test filter = restore_test.*
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from restore_test
[ RUN      ] restore_test.restore
============
start global_env()
meta1 pid: 366045
meta1 dir: /home/smilencer/Code/incubator-pegasus/onebox/meta1
project root: /home/smilencer/Code/incubator-pegasus
working dir: /home/smilencer/Code/incubator-pegasus/src/builder/test/function_test
D2020-12-27 22:31:55.918 (1609079515918669294 5a4a5) unknown.io-thrd.369829: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
get ip: 192.168.123.119
/home/smilencer/Code/incubator-pegasus
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Stopping zookeeper ... STOPPED
Clearing zookeeper ... CLEARED
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Starting zookeeper ... STARTED
Zookeeper started at port 22181
starting server
cd /home/smilencer/Code/incubator-pegasus/onebox/meta1 && /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta &>result &
smilenc+  369975  369913  0 22:31 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta2 && /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta &>result &
smilenc+  369983  369913  0 22:31 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta3 && /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta &>result &
smilenc+  370025  369913  0 22:31 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/replica1 && /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica &>result &
smilenc+  370068  369913  0 22:31 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica2 && /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica &>result &
smilenc+  370110  369913  0 22:31 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica3 && /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica &>result &
smilenc+  370166  369913  0 22:31 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
D2020-12-27 22:32:02.3091 (1609079522309836758 5a4a5)  mimic.io-thrd.369829: client session created, remote_server = 127.0.0.1:34603, current_count = 1
D2020-12-27 22:32:02.3101 (1609079522310055411 5a4a7)  mimic.io-thrd.369831: client session connected, remote_server = 127.0.0.1:34603, current_count = 1
D2020-12-27 22:32:02.3102 (1609079522310532557 5a4a8)  mimic.io-thrd.369832: client session created, remote_server = 192.168.123.119:34601, current_count = 2
D2020-12-27 22:32:02.3102 (1609079522310706894 5a4a6)  mimic.io-thrd.369830: client session connected, remote_server = 192.168.123.119:34601, current_count = 2
create app backup_test succeed, waiting for app ready
backup_test not ready yet, still waiting... (0/8)
backup_test not ready yet, still waiting... (0/8)
backup_test not ready yet, still waiting... (0/8)
backup_test not ready yet, still waiting... (3/8)
backup_test not ready yet, still waiting... (3/8)
backup_test not ready yet, still waiting... (3/8)
backup_test not ready yet, still waiting... (3/8)
backup_test not ready yet, still waiting... (3/8)
backup_test is ready now: (8/8)
backup_test is ready now!
start to write 10000 key-value pairs, using set()..
D2020-12-27 22:32:20.3293 (1609079540329648019 5a4a5)  mimic.io-thrd.369829: client session created, remote_server = 127.0.0.1:34601, current_count = 3
D2020-12-27 22:32:20.3293 (1609079540329867165 5a4a6)  mimic.io-thrd.369830: client session connected, remote_server = 127.0.0.1:34601, current_count = 3
D2020-12-27 22:32:20.3304 (1609079540330331499 5a4c4)  mimic.default5.0100a4a500030024: client session created, remote_server = 192.168.123.119:34803, current_count = 4
D2020-12-27 22:32:20.3304 (1609079540330586402 5a4a9)  mimic.io-thrd.369833: client session connected, remote_server = 192.168.123.119:34803, current_count = 4
D2020-12-27 22:32:20.3325 (1609079540332644553 5a4a5)  mimic.io-thrd.369829: client session created, remote_server = 192.168.123.119:34801, current_count = 5
D2020-12-27 22:32:20.3325 (1609079540332895048 5a4a8)  mimic.io-thrd.369832: client session connected, remote_server = 192.168.123.119:34801, current_count = 5
D2020-12-27 22:32:20.3346 (1609079540334544607 5a4a5)  mimic.io-thrd.369829: client session created, remote_server = 192.168.123.119:34802, current_count = 6
D2020-12-27 22:32:20.3346 (1609079540334696675 5a4a9)  mimic.io-thrd.369833: client session connected, remote_server = 192.168.123.119:34802, current_count = 6
write data complete, total time = 2s
add backup policy succeed, policy_name = policy_1
add backup policy complete with err = ERR_OK
start testing restore...
sleep 3s to wait backup complete...
sleep 3s to wait backup complete...
sleep 3s to wait backup complete...
sleep 3s to wait backup complete...
sleep 3s to wait backup complete...
sleep 3s to wait backup complete...
sleep 3s to wait backup complete...
sleep 3s to wait backup complete...
sleep 3s to wait backup complete...
sleep 3s to wait backup complete...
sleep 3s to wait backup complete...
sleep 3s to wait backup complete...
sleep 3s to wait backup complete...
sleep 3s to wait backup complete...
first backup_timestamp = 1609079542808
sleep 1 second to wait complete...
	new app_id = 4
sleep 3s to wait app become healthy...
partition[1] is unhealthy, coz replica_cont = 1, but max_replica_count = 3
sleep 3s to wait app become healthy...
partition[1] is unhealthy, coz replica_cont = 1, but max_replica_count = 3
sleep 3s to wait app become healthy...
partition[1] is unhealthy, coz replica_cont = 1, but max_replica_count = 3
sleep 3s to wait app become healthy...
start to get 10000 key-value pairs, using get()...
verify data complete, total time = 0s
restore passed.....
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Stopping zookeeper ... STOPPED
Clearing zookeeper ... CLEARED
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Starting zookeeper ... STARTED
Zookeeper started at port 22181
starting server
cd /home/smilencer/Code/incubator-pegasus/onebox/meta1 && /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta &>result &
smilenc+  375332  375270  0 22:33 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta2 && /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta &>result &
smilenc+  375340  375270  0 22:33 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta3 && /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta &>result &
smilenc+  375382  375270  0 22:33 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/replica1 && /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica &>result &
smilenc+  375425  375270  0 22:33 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica2 && /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica &>result &
smilenc+  375467  375270  0 22:33 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica3 && /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica &>result &
smilenc+  375523  375270  0 22:33 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
Wait cluster to become healthy...
Sleeped for 1 seconds
Sleeped for 2 seconds
Sleeped for 3 seconds
Sleeped for 4 seconds
Sleeped for 5 seconds
Sleeped for 6 seconds
Sleeped for 7 seconds
Sleeped for 8 seconds
Sleeped for 9 seconds
Sleeped for 10 seconds
Sleeped for 11 seconds
Sleeped for 12 seconds
Sleeped for 13 seconds
Sleeped for 14 seconds
Sleeped for 15 seconds
Sleeped for 16 seconds
Sleeped for 17 seconds
Sleeped for 18 seconds
Sleeped for 19 seconds
Sleeped for 20 seconds
Cluster becomes healthy.
D2020-12-27 22:33:20.564 (1609079600564789770 5a4a9)  mimic.io-thrd.369833: asio read from 127.0.0.1:34601 failed: End of file
D2020-12-27 22:33:20.5645 (1609079600564802484 5a4a9)  mimic.io-thrd.369833: client session disconnected, remote_server = 127.0.0.1:34601, current_count = 5
D2020-12-27 22:33:20.564 (1609079600564875813 5a4a9)  mimic.io-thrd.369833: asio read from 192.168.123.119:34601 failed: End of file
D2020-12-27 22:33:20.5644 (1609079600564882032 5a4a9)  mimic.io-thrd.369833: client session disconnected, remote_server = 192.168.123.119:34601, current_count = 4
D2020-12-27 22:33:20.565 (1609079600565142154 5a4a9)  mimic.io-thrd.369833: asio read from 127.0.0.1:34603 failed: End of file
D2020-12-27 22:33:20.5653 (1609079600565152340 5a4a9)  mimic.io-thrd.369833: client session disconnected, remote_server = 127.0.0.1:34603, current_count = 3
D2020-12-27 22:33:20.585 (1609079600585167297 5a4a9)  mimic.io-thrd.369833: asio read from 192.168.123.119:34802 failed: End of file
D2020-12-27 22:33:20.5852 (1609079600585180010 5a4a9)  mimic.io-thrd.369833: client session disconnected, remote_server = 192.168.123.119:34802, current_count = 2
D2020-12-27 22:33:20.585 (1609079600585414540 5a4a7)  mimic.io-thrd.369831: asio read from 192.168.123.119:34803 failed: End of file
D2020-12-27 22:33:20.5851 (1609079600585424725 5a4a7)  mimic.io-thrd.369831: client session disconnected, remote_server = 192.168.123.119:34803, current_count = 1
D2020-12-27 22:33:20.587 (1609079600587203859 5a4a6)  mimic.io-thrd.369830: asio read from 192.168.123.119:34801 failed: End of file
D2020-12-27 22:33:20.5870 (1609079600587214228 5a4a6)  mimic.io-thrd.369830: client session disconnected, remote_server = 192.168.123.119:34801, current_count = 0
[       OK ] restore_test.restore (108926 ms)
[----------] 1 test from restore_test (108927 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (108927 ms total)
[  PASSED  ] 1 test.
dsn exit with code 0
W2020-12-27 22:33:44.839 (1609079624839785303 5c2cf) unknown.io-thrd.377551:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
W2020-12-27 22:33:44.839 (1609079624839807409 5c2cf) unknown.io-thrd.377551:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX_ACK from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
D2020-12-27 22:33:44.8419 (1609079624841958470 5c2cf) unknown.io-thrd.377551: process(377551) start: 1609079624839, date: 2020-12-27 22:33:44.839
D2020-12-27 22:33:44.842 (1609079624842217275 5c2cf) unknown.io-thrd.377551: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:33:44.8421 (1609079624842222504 5c2cf) unknown.io-thrd.377551: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_DSN ...
D2020-12-27 22:33:44.842ÿ (1609079624842267942 5c2cf) unknown.io-thrd.377551: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:33:44.8421 (1609079624842359261 5c2cf) unknown.io-thrd.377551: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_DSN ...
D2020-12-27 22:33:44.842 (1609079624842454582 5c2cf) unknown.io-thrd.377551: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:33:44.8421 (1609079624842458345 5c2cf) unknown.io-thrd.377551: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:33:44.842ÿ (1609079624842488949 5c2cf) unknown.io-thrd.377551: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:33:44.8421 (1609079624842567629 5c2cf) unknown.io-thrd.377551: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:33:44.842 (1609079624842661498 5c2cf) unknown.io-thrd.377551: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:33:44.8421 (1609079624842665132 5c2cf) unknown.io-thrd.377551: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_RAW ...
D2020-12-27 22:33:44.842ÿ (1609079624842694632 5c2cf) unknown.io-thrd.377551: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:33:44.8421 (1609079624842767581 5c2cf) unknown.io-thrd.377551: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_RAW ...
D2020-12-27 22:33:44.842 (1609079624842773371 5c2cf) unknown.io-thrd.377551: === service_node=[mimic], primary_address=[192.168.123.119:1] ===
W2020-12-27 22:33:44.8431 (1609079624843347075 5c2e8)  mimic.io-thrd.377576: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:33:44.8448 (1609079624844821546 5c2cf) unknown.io-thrd.377551: [mimic] thread pool [default] started, pool_code = THREAD_POOL_DEFAULT, worker_count = 8, worker_share_core = true, partitioned = false, ...
W2020-12-27 22:33:44.8441 (1609079624844875819 5c2f1)  mimic.io-thrd.377585: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:33:44.8454 (1609079624845026796 5c2cf) unknown.io-thrd.377551: [mimic] thread pool [THREAD_POOL_META_SERVER] started, pool_code = THREAD_POOL_META_SERVER, worker_count = 4, worker_share_core = true, partitioned = false, ...
D2020-12-27 22:33:44.845 (1609079624845105283 5c2cf) unknown.io-thrd.377551: MainThread: app_name=temp
Note: Google Test filter = recovery_test.*
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from recovery_test
[ RUN      ] recovery_test.recovery
============
start global_env()
meta1 pid: 375332
meta1 dir: /home/smilencer/Code/incubator-pegasus/onebox/meta1
project root: /home/smilencer/Code/incubator-pegasus
working dir: /home/smilencer/Code/incubator-pegasus/src/builder/test/function_test
D2020-12-27 22:33:44.860 (1609079624860404351 5c2cf) unknown.io-thrd.377551: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
get ip: 192.168.123.119
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Stopping zookeeper ... STOPPED
Clearing zookeeper ... CLEARED
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Starting zookeeper ... STARTED
Zookeeper started at port 22181
starting server
cd /home/smilencer/Code/incubator-pegasus/onebox/meta1 && /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta &>result &
smilenc+  377698  377636  0 22:33 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/replica1 && /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica &>result &
smilenc+  377707  377636  0 22:33 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica2 && /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica &>result &
smilenc+  377747  377636  0 22:33 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica3 && /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica &>result &
smilenc+  377805  377636  0 22:33 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
sleep for a while to wait the new onebox start
D2020-12-27 22:33:51.1401 (1609079631140949983 5c2cf)  mimic.io-thrd.377551: client session created, remote_server = 127.0.0.1:34601, current_count = 1
D2020-12-27 22:33:51.1411 (1609079631141178464 5c2d1)  mimic.io-thrd.377553: client session connected, remote_server = 127.0.0.1:34601, current_count = 1
create app test_table succeed, waiting for app ready
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (2/4)
test_table not ready yet, still waiting... (2/4)
test_table not ready yet, still waiting... (2/4)
test_table not ready yet, still waiting... (2/4)
test_table not ready yet, still waiting... (2/4)
test_table is ready now: (4/4)
test_table is ready now!
write 2048 keys
D2020-12-27 22:34:09.1502 (1609079649150381965 5c2eb)  mimic.default2.0100c2cf00030021: client session created, remote_server = 192.168.123.119:34803, current_count = 2
D2020-12-27 22:34:09.1502 (1609079649150626197 5c2d1)  mimic.io-thrd.377553: client session connected, remote_server = 192.168.123.119:34803, current_count = 2
D2020-12-27 22:34:09.1513 (1609079649151685937 5c2cf)  mimic.io-thrd.377551: client session created, remote_server = 192.168.123.119:34801, current_count = 3
D2020-12-27 22:34:09.1513 (1609079649151956140 5c2d0)  mimic.io-thrd.377552: client session connected, remote_server = 192.168.123.119:34801, current_count = 3
D2020-12-27 22:34:09.1534 (1609079649153141092 5c2cf)  mimic.io-thrd.377551: client session created, remote_server = 192.168.123.119:34802, current_count = 4
D2020-12-27 22:34:09.1534 (1609079649153285664 5c2d1)  mimic.io-thrd.377553: client session connected, remote_server = 192.168.123.119:34802, current_count = 4
>>>>> test basic recovery <<<<<
smilenc+  377698    1635  0 22:33 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
INFO: meta@1 stopped
smilenc+  377707    1635  4 22:33 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
INFO: replica@1 stopped
smilenc+  377747    1635  4 22:33 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
INFO: replica@2 stopped
smilenc+  377805    1635  4 22:33 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
INFO: replica@3 stopped
D2020-12-27 22:34:09.676 (1609079649676394547 5c2d2)  mimic.io-thrd.377554: asio read from 127.0.0.1:34601 failed: End of file
D2020-12-27 22:34:09.6763 (1609079649676409990 5c2d2)  mimic.io-thrd.377554: client session disconnected, remote_server = 127.0.0.1:34601, current_count = 3
D2020-12-27 22:34:09.714 (1609079649714954433 5c2d3)  mimic.io-thrd.377555: asio read from 192.168.123.119:34801 failed: End of file
D2020-12-27 22:34:09.7142 (1609079649714962073 5c2d3)  mimic.io-thrd.377555: client session disconnected, remote_server = 192.168.123.119:34801, current_count = 2
D2020-12-27 22:34:09.748 (1609079649748081359 5c2d3)  mimic.io-thrd.377555: asio read from 192.168.123.119:34802 failed: End of file
D2020-12-27 22:34:09.7481 (1609079649748096831 5c2d3)  mimic.io-thrd.377555: client session disconnected, remote_server = 192.168.123.119:34802, current_count = 1
sleep for a while to wait the socket to destroy
cd /home/smilencer/Code/incubator-pegasus/onebox/replica1 && /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica &>result &
smilenc+  378900  378891  0 22:34 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
INFO: replica@1 started
cd /home/smilencer/Code/incubator-pegasus/onebox/replica2 && /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica &>result &
smilenc+  378962  378905  0 22:34 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
INFO: replica@2 started
cd /home/smilencer/Code/incubator-pegasus/onebox/replica3 && /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica &>result &
smilenc+  379201  379045  0 22:34 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
INFO: replica@3 started
D2020-12-27 22:34:09.780 (1609079649780608715 5c2d3)  mimic.io-thrd.377555: asio read from 192.168.123.119:34803 failed: End of file
D2020-12-27 22:34:09.7800 (1609079649780643471 5c2d3)  mimic.io-thrd.377555: client session disconnected, remote_server = 192.168.123.119:34803, current_count = 0
sleep for a while to wait the replica to start
cd /home/smilencer/Code/incubator-pegasus/onebox/meta1 && /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta &>result &
smilenc+  380733  380724  0 22:34 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
INFO: meta@1 started
sleep for a while to wait the meta to come to alive
Wait seconds: 30
Skip bad nodes: false
Skip lost partitions: false
Node list:
=============================
192.168.123.119:34801
192.168.123.119:34802
192.168.123.119:34803
=============================
D2020-12-27 22:34:34.9411 (1609079674941331274 5c2cf)  mimic.io-thrd.377551: client session created, remote_server = 127.0.0.1:34601, current_count = 1
D2020-12-27 22:34:34.9411 (1609079674941586737 5c2d1)  mimic.io-thrd.377553: client session connected, remote_server = 127.0.0.1:34601, current_count = 1
Recover result: ERR_OK
Wait seconds: 30
Skip bad nodes: false
Skip lost partitions: false
Node list:
=============================
192.168.123.119:34801
192.168.123.119:34802
192.168.123.119:34803
=============================
Recover result: ERR_SERVICE_ALREADY_RUNNING
create app test_table succeed, waiting for app ready
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table is ready now: (4/4)
test_table is ready now!
D2020-12-27 22:34:56.9962 (1609079696996090566 5c2cf)  mimic.io-thrd.377551: client session created, remote_server = 192.168.123.119:34803, current_count = 2
D2020-12-27 22:34:56.9962 (1609079696996294784 5c2d3)  mimic.io-thrd.377555: client session connected, remote_server = 192.168.123.119:34803, current_count = 2
D2020-12-27 22:34:56.9963 (1609079696996805809 5c2e9)  mimic.default0.0100c2cf0003104b: clear partition configuration cache 3.3 due to access failure ERR_INVALID_STATE
D2020-12-27 22:34:57.5 (1609079697005905184 5c2ef)  mimic.default6.0101000100000002: client session created, remote_server = 192.168.123.119:34801, current_count = 3
D2020-12-27 22:34:57.6 (1609079697006118108 5c2d0)  mimic.io-thrd.377552: client session connected, remote_server = 192.168.123.119:34801, current_count = 3
D2020-12-27 22:34:57.7 (1609079697007329811 5c2cf)  mimic.io-thrd.377551: client session created, remote_server = 192.168.123.119:34802, current_count = 4
D2020-12-27 22:34:57.7 (1609079697007478100 5c2d3)  mimic.io-thrd.377555: client session connected, remote_server = 192.168.123.119:34802, current_count = 4
D2020-12-27 22:34:57.7 (1609079697007881847 5c2f0)  mimic.default7.0100c2cf0003104f: clear partition configuration cache 3.1 due to access failure ERR_INVALID_STATE
D2020-12-27 22:34:57.17 (1609079697017736348 5c2ea)  mimic.default1.0100c2cf00031051: clear partition configuration cache 3.0 due to access failure ERR_INVALID_STATE
>>>>> test recovery from subset of all nodes <<<<<
smilenc+  380733    1635  0 22:34 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
INFO: meta@1 stopped
smilenc+  378900    1635  1 22:34 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
INFO: replica@1 stopped
smilenc+  378962    1635  1 22:34 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
INFO: replica@2 stopped
smilenc+  379201    1635  1 22:34 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
INFO: replica@3 stopped
D2020-12-27 22:34:57.175 (1609079697175445985 5c2d2)  mimic.io-thrd.377554: asio read from 127.0.0.1:34601 failed: End of file
D2020-12-27 22:34:57.1753 (1609079697175457940 5c2d2)  mimic.io-thrd.377554: client session disconnected, remote_server = 127.0.0.1:34601, current_count = 3
D2020-12-27 22:34:57.214 (1609079697214975569 5c2d1)  mimic.io-thrd.377553: asio read from 192.168.123.119:34801 failed: End of file
D2020-12-27 22:34:57.2142 (1609079697214988333 5c2d1)  mimic.io-thrd.377553: client session disconnected, remote_server = 192.168.123.119:34801, current_count = 2
D2020-12-27 22:34:57.246 (1609079697246849843 5c2d1)  mimic.io-thrd.377553: asio read from 192.168.123.119:34802 failed: End of file
D2020-12-27 22:34:57.2461 (1609079697246864491 5c2d1)  mimic.io-thrd.377553: client session disconnected, remote_server = 192.168.123.119:34802, current_count = 1
sleep for a while to wait the socket to destroy
cd /home/smilencer/Code/incubator-pegasus/onebox/replica1 && /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica &>result &
smilenc+  381076  381067  0 22:35 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
INFO: replica@1 started
cd /home/smilencer/Code/incubator-pegasus/onebox/replica2 && /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica &>result &
smilenc+  381156  381081  0 22:35 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
INFO: replica@2 started
cd /home/smilencer/Code/incubator-pegasus/onebox/replica3 && /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica &>result &
smilenc+  381278  381221  0 22:35 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
INFO: replica@3 started
D2020-12-27 22:34:57.277 (1609079697277042965 5c2d2)  mimic.io-thrd.377554: asio read from 192.168.123.119:34803 failed: End of file
D2020-12-27 22:34:57.2770 (1609079697277052737 5c2d2)  mimic.io-thrd.377554: client session disconnected, remote_server = 192.168.123.119:34803, current_count = 0
sleep for a while to wait the replica to start
cd /home/smilencer/Code/incubator-pegasus/onebox/meta1 && /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta &>result &
smilenc+  382912  382903  0 22:35 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
INFO: meta@1 started
sleep for a while to wait the meta to come to alive
Wait seconds: 30
Skip bad nodes: false
Skip lost partitions: false
Node list:
=============================
192.168.123.119:34801
192.168.123.119:34802
=============================
D2020-12-27 22:35:22.4191 (1609079722419452332 5c2cf)  mimic.io-thrd.377551: client session created, remote_server = 127.0.0.1:34601, current_count = 1
D2020-12-27 22:35:22.4191 (1609079722419664931 5c2d1)  mimic.io-thrd.377553: client session connected, remote_server = 127.0.0.1:34601, current_count = 1
Recover result: ERR_OK
=============================
WARNING: partition(1.0) only collects 2/3 of replicas, may lost data
WARNING: partition(1.1) only collects 2/3 of replicas, may lost data
WARNING: partition(1.2) only collects 2/3 of replicas, may lost data
WARNING: partition(1.3) only collects 2/3 of replicas, may lost data
WARNING: partition(2.0) only collects 2/3 of replicas, may lost data
WARNING: partition(2.1) only collects 2/3 of replicas, may lost data
WARNING: partition(2.2) only collects 2/3 of replicas, may lost data
WARNING: partition(2.3) only collects 2/3 of replicas, may lost data
WARNING: partition(2.4) only collects 2/3 of replicas, may lost data
WARNING: partition(2.5) only collects 2/3 of replicas, may lost data
WARNING: partition(2.6) only collects 2/3 of replicas, may lost data
WARNING: partition(2.7) only collects 2/3 of replicas, may lost data
WARNING: partition(3.0) only collects 2/3 of replicas, may lost data
WARNING: partition(3.1) only collects 2/3 of replicas, may lost data
WARNING: partition(3.2) only collects 2/3 of replicas, may lost data
WARNING: partition(3.3) only collects 2/3 of replicas, may lost data
=============================
create app test_table succeed, waiting for app ready
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table is ready now: (4/4)
test_table is ready now!
D2020-12-27 22:35:44.4312 (1609079744431119377 5c2cf)  mimic.io-thrd.377551: client session created, remote_server = 192.168.123.119:34801, current_count = 2
D2020-12-27 22:35:44.4312 (1609079744431244147 5c2d0)  mimic.io-thrd.377552: client session connected, remote_server = 192.168.123.119:34801, current_count = 2
D2020-12-27 22:35:44.4313 (1609079744431442354 5c2f0)  mimic.default7.0100c2cf00032072: clear partition configuration cache 3.3 due to access failure ERR_INVALID_STATE
D2020-12-27 22:35:44.4403 (1609079744440145651 5c2ea)  mimic.default1.0101000500000003: client session created, remote_server = 192.168.123.119:34802, current_count = 3
D2020-12-27 22:35:44.4403 (1609079744440403101 5c2d3)  mimic.io-thrd.377555: client session connected, remote_server = 192.168.123.119:34802, current_count = 3
D2020-12-27 22:35:44.4412 (1609079744441128009 5c2ef)  mimic.default6.0100c2cf00032074: clear partition configuration cache 3.2 due to access failure ERR_INVALID_STATE
D2020-12-27 22:35:44.4501 (1609079744450824641 5c2f0)  mimic.default7.0100c2cf00032076: clear partition configuration cache 3.1 due to access failure ERR_INVALID_STATE
D2020-12-27 22:35:44.4600 (1609079744460592580 5c2ef)  mimic.default6.0100c2cf00032078: clear partition configuration cache 3.0 due to access failure ERR_INVALID_STATE
>>>>> test recovery, some partitions have been lost <<<<<
smilenc+  382912    1635  0 22:35 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
INFO: meta@1 stopped
smilenc+  381076    1635  2 22:35 pts/1    00:00:01 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
INFO: replica@1 stopped
smilenc+  381156    1635  2 22:35 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
INFO: replica@2 stopped
smilenc+  381278    1635  1 22:35 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
INFO: replica@3 stopped
D2020-12-27 22:35:44.633 (1609079744633145901 5c2d2)  mimic.io-thrd.377554: asio read from 127.0.0.1:34601 failed: End of file
D2020-12-27 22:35:44.6332 (1609079744633156714 5c2d2)  mimic.io-thrd.377554: client session disconnected, remote_server = 127.0.0.1:34601, current_count = 2
D2020-12-27 22:35:44.671 (1609079744671910112 5c2d3)  mimic.io-thrd.377555: asio read from 192.168.123.119:34801 failed: End of file
D2020-12-27 22:35:44.6711 (1609079744671922176 5c2d3)  mimic.io-thrd.377555: client session disconnected, remote_server = 192.168.123.119:34801, current_count = 1
D2020-12-27 22:35:44.701 (1609079744701676533 5c2d3)  mimic.io-thrd.377555: asio read from 192.168.123.119:34802 failed: End of file
D2020-12-27 22:35:44.7010 (1609079744701687375 5c2d3)  mimic.io-thrd.377555: client session disconnected, remote_server = 192.168.123.119:34802, current_count = 0
sleep for a while to wait the socket to destroy
cd /home/smilencer/Code/incubator-pegasus/onebox/replica3/data/replica/reps && rm -rf 2.0.pegasus
cd /home/smilencer/Code/incubator-pegasus/onebox/replica1/data/replica/reps && rm -rf 2.1.pegasus
cd /home/smilencer/Code/incubator-pegasus/onebox/replica2/data/replica/reps && rm -rf 2.2.pegasus
cd /home/smilencer/Code/incubator-pegasus/onebox/replica1/data/replica/reps && rm -rf 2.3.pegasus
cd /home/smilencer/Code/incubator-pegasus/onebox/replica1 && /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica &>result &
smilenc+  384017  384008  0 22:35 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
INFO: replica@1 started
cd /home/smilencer/Code/incubator-pegasus/onebox/replica2 && /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica &>result &
smilenc+  384079  384022  0 22:35 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
INFO: replica@2 started
cd /home/smilencer/Code/incubator-pegasus/onebox/replica3 && /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica &>result &
smilenc+  384219  384162  0 22:35 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
INFO: replica@3 started
sleep for a while to wait the replica to start
cd /home/smilencer/Code/incubator-pegasus/onebox/meta1 && /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta &>result &
smilenc+  385715  385706  0 22:36 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
INFO: meta@1 started
sleep for a while to wait the meta to come to alive
Wait seconds: 30
Skip bad nodes: false
Skip lost partitions: false
Node list:
=============================
192.168.123.119:34801
192.168.123.119:34802
192.168.123.119:34803
=============================
D2020-12-27 22:36:09.8961 (1609079769896832628 5c2cf)  mimic.io-thrd.377551: client session created, remote_server = 127.0.0.1:34601, current_count = 1
D2020-12-27 22:36:09.8971 (1609079769897026928 5c2d1)  mimic.io-thrd.377553: client session connected, remote_server = 127.0.0.1:34601, current_count = 1
Recover result: ERR_OK
=============================
WARNING: partition(2.0) only collects 2/3 of replicas, may lost data
WARNING: partition(2.1) only collects 2/3 of replicas, may lost data
WARNING: partition(2.2) only collects 2/3 of replicas, may lost data
WARNING: partition(2.3) only collects 2/3 of replicas, may lost data
=============================
create app test_table succeed, waiting for app ready
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (2/4)
test_table not ready yet, still waiting... (2/4)
test_table not ready yet, still waiting... (3/4)
test_table not ready yet, still waiting... (3/4)
test_table not ready yet, still waiting... (3/4)
test_table is ready now: (4/4)
test_table is ready now!
D2020-12-27 22:36:41.9122 (1609079801912553187 5c2cf)  mimic.io-thrd.377551: client session created, remote_server = 192.168.123.119:34802, current_count = 2
D2020-12-27 22:36:41.9122 (1609079801912801811 5c2d2)  mimic.io-thrd.377554: client session connected, remote_server = 192.168.123.119:34802, current_count = 2
D2020-12-27 22:36:41.9133 (1609079801913288013 5c2ef)  mimic.default6.0100c2cf000330a8: clear partition configuration cache 3.3 due to access failure ERR_INVALID_STATE
D2020-12-27 22:36:41.9223 (1609079801922077321 5c2eb)  mimic.default2.0101000100000008: client session created, remote_server = 192.168.123.119:34801, current_count = 3
D2020-12-27 22:36:41.9223 (1609079801922324123 5c2d1)  mimic.io-thrd.377553: client session connected, remote_server = 192.168.123.119:34801, current_count = 3
D2020-12-27 22:36:41.9232 (1609079801923353875 5c2f0)  mimic.default7.0100c2cf000330aa: clear partition configuration cache 3.2 due to access failure ERR_INVALID_STATE
D2020-12-27 22:36:41.9331 (1609079801933195973 5c2ef)  mimic.default6.0100c2cf000330ac: clear partition configuration cache 3.1 due to access failure ERR_INVALID_STATE
D2020-12-27 22:36:41.9420 (1609079801942967499 5c2f0)  mimic.default7.0100c2cf000330ae: clear partition configuration cache 3.0 due to access failure ERR_INVALID_STATE
>>>>> test recovery, app 1 is removed <<<<<
smilenc+  385715    1635  0 22:36 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
INFO: meta@1 stopped
smilenc+  384017    1635  2 22:35 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
INFO: replica@1 stopped
smilenc+  384079    1635  2 22:35 pts/1    00:00:01 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
INFO: replica@2 stopped
smilenc+  384219    1635  1 22:35 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
INFO: replica@3 stopped
D2020-12-27 22:36:42.110 (1609079802110582182 5c2d1)  mimic.io-thrd.377553: asio read from 127.0.0.1:34601 failed: End of file
D2020-12-27 22:36:42.1102 (1609079802110593359 5c2d1)  mimic.io-thrd.377553: client session disconnected, remote_server = 127.0.0.1:34601, current_count = 2
D2020-12-27 22:36:42.149 (1609079802149218257 5c2d2)  mimic.io-thrd.377554: asio read from 192.168.123.119:34801 failed: End of file
D2020-12-27 22:36:42.1491 (1609079802149233188 5c2d2)  mimic.io-thrd.377554: client session disconnected, remote_server = 192.168.123.119:34801, current_count = 1
D2020-12-27 22:36:42.181 (1609079802181415198 5c2d1)  mimic.io-thrd.377553: asio read from 192.168.123.119:34802 failed: End of file
D2020-12-27 22:36:42.1810 (1609079802181425524 5c2d1)  mimic.io-thrd.377553: client session disconnected, remote_server = 192.168.123.119:34802, current_count = 0
sleep for a while to wait the socket to destroy
cd /home/smilencer/Code/incubator-pegasus/onebox/replica1/data/replica/reps && rm -rf 1.*.pegasus
cd /home/smilencer/Code/incubator-pegasus/onebox/replica2/data/replica/reps && rm -rf 1.*.pegasus
cd /home/smilencer/Code/incubator-pegasus/onebox/replica3/data/replica/reps && rm -rf 1.*.pegasus
cd /home/smilencer/Code/incubator-pegasus/onebox/replica1 && /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica &>result &
smilenc+  386987  386978  0 22:36 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
INFO: replica@1 started
cd /home/smilencer/Code/incubator-pegasus/onebox/replica2 && /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica &>result &
smilenc+  387049  386992  0 22:36 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
INFO: replica@2 started
cd /home/smilencer/Code/incubator-pegasus/onebox/replica3 && /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica &>result &
smilenc+  387194  387132  0 22:36 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
INFO: replica@3 started
sleep for a while to wait the replica to start
cd /home/smilencer/Code/incubator-pegasus/onebox/meta1 && /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta &>result &
smilenc+  388424  388415  0 22:37 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
INFO: meta@1 started
sleep for a while to wait the meta to come to alive
Wait seconds: 30
Skip bad nodes: false
Skip lost partitions: false
Node list:
=============================
192.168.123.119:34801
192.168.123.119:34802
192.168.123.119:34803
=============================
D2020-12-27 22:37:07.3891 (1609079827389909326 5c2cf)  mimic.io-thrd.377551: client session created, remote_server = 127.0.0.1:34601, current_count = 1
D2020-12-27 22:37:07.3901 (1609079827390196472 5c2d0)  mimic.io-thrd.377552: client session connected, remote_server = 127.0.0.1:34601, current_count = 1
Recover result: ERR_OK
create app test_table succeed, waiting for app ready
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (0/4)
test_table not ready yet, still waiting... (1/4)
test_table not ready yet, still waiting... (1/4)
test_table not ready yet, still waiting... (1/4)
test_table not ready yet, still waiting... (3/4)
test_table not ready yet, still waiting... (3/4)
test_table not ready yet, still waiting... (3/4)
test_table not ready yet, still waiting... (3/4)
test_table not ready yet, still waiting... (3/4)
test_table is ready now: (4/4)
test_table is ready now!
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Stopping zookeeper ... STOPPED
Clearing zookeeper ... CLEARED
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Starting zookeeper ... STARTED
Zookeeper started at port 22181
starting server
cd /home/smilencer/Code/incubator-pegasus/onebox/meta1 && /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta &>result &
smilenc+  388671  388608  0 22:37 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta2 && /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta &>result &
smilenc+  388679  388608  0 22:37 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta3 && /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta &>result &
smilenc+  388721  388608  0 22:37 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/replica1 && /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica &>result &
smilenc+  388764  388608  0 22:37 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica2 && /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica &>result &
smilenc+  388776  388608  0 22:37 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica3 && /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica &>result &
smilenc+  388864  388608  0 22:37 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
Wait cluster to become healthy...
Sleeped for 1 seconds
Sleeped for 2 seconds
Sleeped for 3 seconds
Sleeped for 4 seconds
Sleeped for 5 seconds
Sleeped for 6 seconds
Sleeped for 7 seconds
Sleeped for 8 seconds
Sleeped for 9 seconds
Sleeped for 10 seconds
Sleeped for 11 seconds
Sleeped for 12 seconds
Sleeped for 13 seconds
Sleeped for 14 seconds
Sleeped for 15 seconds
Sleeped for 16 seconds
Sleeped for 17 seconds
Sleeped for 18 seconds
Sleeped for 19 seconds
Sleeped for 20 seconds
Cluster becomes healthy.
D2020-12-27 22:37:39.4062 (1609079859406251686 5c2cf)  mimic.io-thrd.377551: client session created, remote_server = 192.168.123.119:34801, current_count = 2
D2020-12-27 22:37:39.4062 (1609079859406428670 5c2d0)  mimic.io-thrd.377552: client session connected, remote_server = 192.168.123.119:34801, current_count = 2
D2020-12-27 22:37:39.4063 (1609079859406977893 5c2ee)  mimic.default5.0100c2cf000340de: clear partition configuration cache 3.3 due to access failure ERR_INVALID_STATE
D2020-12-27 22:37:39.4153 (1609079859415895063 5c2e9)  mimic.default0.010100010000000e: client session created, remote_server = 192.168.123.119:34802, current_count = 3
D2020-12-27 22:37:39.4163 (1609079859416134978 5c2d0)  mimic.io-thrd.377552: client session connected, remote_server = 192.168.123.119:34802, current_count = 3
D2020-12-27 22:37:39.578 (1609079859578256557 5c2d1)  mimic.io-thrd.377553: asio read from 127.0.0.1:34601 failed: End of file
D2020-12-27 22:37:39.5782 (1609079859578269428 5c2d1)  mimic.io-thrd.377553: client session disconnected, remote_server = 127.0.0.1:34601, current_count = 2
D2020-12-27 22:37:39.586 (1609079859586870926 5c2d2)  mimic.io-thrd.377554: asio read from 192.168.123.119:34801 failed: End of file
D2020-12-27 22:37:39.5861 (1609079859586884935 5c2d2)  mimic.io-thrd.377554: client session disconnected, remote_server = 192.168.123.119:34801, current_count = 1
D2020-12-27 22:37:39.587 (1609079859587127864 5c2d2)  mimic.io-thrd.377554: asio read from 192.168.123.119:34802 failed: End of file
D2020-12-27 22:37:39.5870 (1609079859587140202 5c2d2)  mimic.io-thrd.377554: client session disconnected, remote_server = 192.168.123.119:34802, current_count = 0
[       OK ] recovery_test.recovery (259173 ms)
[----------] 1 test from recovery_test (259173 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (259173 ms total)
[  PASSED  ] 1 test.
dsn exit with code 0
W2020-12-27 22:38:04.24 (1609079884024911017 5f6d3) unknown.io-thrd.390867:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
W2020-12-27 22:38:04.24 (1609079884024943994 5f6d3) unknown.io-thrd.390867:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX_ACK from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
D2020-12-27 22:38:04.2724 (1609079884027602446 5f6d3) unknown.io-thrd.390867: process(390867) start: 1609079884024, date: 2020-12-27 22:38:04.24
D2020-12-27 22:38:04.27 (1609079884027997977 5f6d3) unknown.io-thrd.390867: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:38:04.28 (1609079884028005965 5f6d3) unknown.io-thrd.390867: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_DSN ...
D2020-12-27 22:38:04.28ÿÿ (1609079884028087075 5f6d3) unknown.io-thrd.390867: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:38:04.28 (1609079884028287946 5f6d3) unknown.io-thrd.390867: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_DSN ...
D2020-12-27 22:38:04.28 (1609079884028546283 5f6d3) unknown.io-thrd.390867: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:38:04.28 (1609079884028551005 5f6d3) unknown.io-thrd.390867: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:38:04.28ÿÿ (1609079884028602337 5f6d3) unknown.io-thrd.390867: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:38:04.28 (1609079884028753156 5f6d3) unknown.io-thrd.390867: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:38:04.28 (1609079884028938950 5f6d3) unknown.io-thrd.390867: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:38:04.28 (1609079884028942893 5f6d3) unknown.io-thrd.390867: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_RAW ...
D2020-12-27 22:38:04.28ÿÿ (1609079884028976606 5f6d3) unknown.io-thrd.390867: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:38:04.29 (1609079884029150610 5f6d3) unknown.io-thrd.390867: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_RAW ...
D2020-12-27 22:38:04.29 (1609079884029158425 5f6d3) unknown.io-thrd.390867: === service_node=[mimic], primary_address=[192.168.123.119:1] ===
W2020-12-27 22:38:04.29 (1609079884029209961 5f6ec)  mimic.io-thrd.390892: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:38:04.29 (1609079884029438627 5f6d3) unknown.io-thrd.390867: [mimic] thread pool [default] started, pool_code = THREAD_POOL_DEFAULT, worker_count = 8, worker_share_core = true, partitioned = false, ...
W2020-12-27 22:38:04.29 (1609079884029479282 5f6f5)  mimic.io-thrd.390901: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:38:04.29 (1609079884029558791 5f6d3) unknown.io-thrd.390867: [mimic] thread pool [THREAD_POOL_META_SERVER] started, pool_code = THREAD_POOL_META_SERVER, worker_count = 4, worker_share_core = true, partitioned = false, ...
D2020-12-27 22:38:04.29 (1609079884029630590 5f6d3) unknown.io-thrd.390867: MainThread: app_name=temp
Note: Google Test filter = bulk_load_test.*
[==========] Running 2 tests from 1 test case.
[----------] Global test environment set-up.
[----------] 2 tests from bulk_load_test
[ RUN      ] bulk_load_test.bulk_load_test_failed
============
start global_env()
meta1 pid: 388671
meta1 dir: /home/smilencer/Code/incubator-pegasus/onebox/meta1
project root: /home/smilencer/Code/incubator-pegasus
working dir: /home/smilencer/Code/incubator-pegasus/src/builder/test/function_test
D2020-12-27 22:38:04.41 (1609079884041840667 5f6d3) unknown.io-thrd.390867: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
get ip: 192.168.123.119
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Stopping zookeeper ... STOPPED
Clearing zookeeper ... CLEARED
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Starting zookeeper ... STARTED
Zookeeper started at port 22181
starting server
cd /home/smilencer/Code/incubator-pegasus/onebox/meta1 && /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta &>result &
smilenc+  391014  390952  0 22:38 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta2 && /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta &>result &
smilenc+  391022  390952  0 22:38 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta3 && /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta &>result &
smilenc+  391064  390952  0 22:38 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/replica1 && /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica &>result &
smilenc+  391107  390952  0 22:38 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica2 && /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica &>result &
smilenc+  391149  390952  0 22:38 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica3 && /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica &>result &
smilenc+  391205  390952  0 22:38 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
Wait cluster to become healthy...
Sleeped for 1 seconds
Sleeped for 2 seconds
Sleeped for 3 seconds
Sleeped for 4 seconds
Sleeped for 5 seconds
Sleeped for 6 seconds
Sleeped for 7 seconds
Sleeped for 8 seconds
Sleeped for 9 seconds
Sleeped for 10 seconds
Sleeped for 11 seconds
Sleeped for 12 seconds
Sleeped for 13 seconds
Sleeped for 14 seconds
Sleeped for 15 seconds
Sleeped for 16 seconds
Sleeped for 17 seconds
Sleeped for 18 seconds
Sleeped for 19 seconds
Sleeped for 20 seconds
Cluster becomes healthy.
D2020-12-27 22:38:04.50 (1609079884050902196 5f6d3)  mimic.io-thrd.390867: client session created, remote_server = 127.0.0.1:34603, current_count = 1
D2020-12-27 22:38:04.50 (1609079884050994595 5f6d5)  mimic.io-thrd.390869: client session connected, remote_server = 127.0.0.1:34603, current_count = 1
D2020-12-27 22:38:04.51 (1609079884051123328 5f6d7)  mimic.io-thrd.390871: client session created, remote_server = 192.168.123.119:34602, current_count = 2
D2020-12-27 22:38:04.51 (1609079884051203216 5f6d6)  mimic.io-thrd.390870: client session connected, remote_server = 192.168.123.119:34602, current_count = 2
D2020-12-27 22:38:04.76 (1609079884076944910 5f6d5)  mimic.io-thrd.390869: asio read from 127.0.0.1:34603 failed: End of file
D2020-12-27 22:38:04.76 (1609079884076967123 5f6d5)  mimic.io-thrd.390869: client session disconnected, remote_server = 127.0.0.1:34603, current_count = 1
D2020-12-27 22:38:04.77 (1609079884077018148 5f6d5)  mimic.io-thrd.390869: asio read from 192.168.123.119:34602 failed: End of file
D2020-12-27 22:38:04.77 (1609079884077024059 5f6d5)  mimic.io-thrd.390869: client session disconnected, remote_server = 192.168.123.119:34602, current_count = 0
[       OK ] bulk_load_test.bulk_load_test_failed (24242 ms)
[ RUN      ] bulk_load_test.bulk_load_tests
D2020-12-27 22:38:28.2801 (1609079908280838935 5f6d3)  mimic.io-thrd.390867: client session created, remote_server = 127.0.0.1:34603, current_count = 1
D2020-12-27 22:38:28.2811 (1609079908281030510 5f6d4)  mimic.io-thrd.390868: client session connected, remote_server = 127.0.0.1:34603, current_count = 1
D2020-12-27 22:38:28.2812 (1609079908281213828 5f6d7)  mimic.io-thrd.390871: client session created, remote_server = 192.168.123.119:34601, current_count = 2
D2020-12-27 22:38:28.2812 (1609079908281348526 5f6d6)  mimic.io-thrd.390870: client session connected, remote_server = 192.168.123.119:34601, current_count = 2
sleep 5s to query bulk status
sleep 5s to query bulk status
sleep 5s to query bulk status
sleep 5s to query bulk status
sleep 5s to query bulk status
mkdir: cannot create directory â€˜onebox/block_serviceâ€™: File exists
mkdir: cannot create directory â€˜onebox/block_service/local_serviceâ€™: File exists
D2020-12-27 22:38:53.4303 (1609079933430463593 5f6d3)  mimic.io-thrd.390867: client session created, remote_server = 127.0.0.1:34601, current_count = 3
D2020-12-27 22:38:53.4303 (1609079933430741086 5f6d6)  mimic.io-thrd.390870: client session connected, remote_server = 127.0.0.1:34601, current_count = 3
D2020-12-27 22:38:53.4314 (1609079933431206262 5f6ef)  mimic.default2.0100f6d300030013: client session created, remote_server = 192.168.123.119:34802, current_count = 4
D2020-12-27 22:38:53.4314 (1609079933431384539 5f6d5)  mimic.io-thrd.390869: client session connected, remote_server = 192.168.123.119:34802, current_count = 4
D2020-12-27 22:38:53.4325 (1609079933432695458 5f6d3)  mimic.io-thrd.390867: client session created, remote_server = 192.168.123.119:34803, current_count = 5
D2020-12-27 22:38:53.4325 (1609079933432828313 5f6d7)  mimic.io-thrd.390871: client session connected, remote_server = 192.168.123.119:34803, current_count = 5
D2020-12-27 22:38:53.4336 (1609079933433872712 5f6d3)  mimic.io-thrd.390867: client session created, remote_server = 192.168.123.119:34801, current_count = 6
D2020-12-27 22:38:53.4336 (1609079933433998316 5f6d6)  mimic.io-thrd.390870: client session connected, remote_server = 192.168.123.119:34801, current_count = 6
sleep 5s to query bulk status
sleep 5s to query bulk status
sleep 5s to query bulk status
sleep 5s to query bulk status
sleep 5s to query bulk status
sleep 5s to query bulk status
sleep 5s to query bulk status
sleep 5s to query bulk status
Start to verify data...
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Stopping zookeeper ... STOPPED
Clearing zookeeper ... CLEARED
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Starting zookeeper ... STARTED
Zookeeper started at port 22181
starting server
cd /home/smilencer/Code/incubator-pegasus/onebox/meta1 && /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta &>result &
smilenc+  394105  394042  0 22:41 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta2 && /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta &>result &
smilenc+  394113  394042  0 22:41 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta3 && /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta &>result &
smilenc+  394150  394042  0 22:41 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/replica1 && /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica &>result &
smilenc+  394211  394042  0 22:41 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica2 && /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica &>result &
smilenc+  394240  394042  0 22:41 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica3 && /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica &>result &
smilenc+  394344  394042  0 22:41 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
Wait cluster to become healthy...
Sleeped for 1 seconds
Sleeped for 2 seconds
Sleeped for 3 seconds
Sleeped for 4 seconds
Sleeped for 5 seconds
Sleeped for 6 seconds
Sleeped for 7 seconds
Sleeped for 8 seconds
Sleeped for 9 seconds
Sleeped for 10 seconds
Sleeped for 11 seconds
Sleeped for 12 seconds
Sleeped for 13 seconds
Sleeped for 14 seconds
Sleeped for 15 seconds
Sleeped for 16 seconds
Sleeped for 17 seconds
Sleeped for 18 seconds
Sleeped for 19 seconds
Sleeped for 20 seconds
Cluster becomes healthy.
D2020-12-27 22:41:37.864 (1609080097864789806 5f6d5)  mimic.io-thrd.390869: asio read from 127.0.0.1:34603 failed: End of file
D2020-12-27 22:41:37.8645 (1609080097864805586 5f6d5)  mimic.io-thrd.390869: client session disconnected, remote_server = 127.0.0.1:34603, current_count = 5
D2020-12-27 22:41:37.866 (1609080097866251414 5f6d4)  mimic.io-thrd.390868: asio read from 127.0.0.1:34601 failed: End of file
D2020-12-27 22:41:37.8664 (1609080097866265926 5f6d4)  mimic.io-thrd.390868: client session disconnected, remote_server = 127.0.0.1:34601, current_count = 4
D2020-12-27 22:41:37.866 (1609080097866341197 5f6d4)  mimic.io-thrd.390868: asio read from 192.168.123.119:34601 failed: End of file
D2020-12-27 22:41:37.8663 (1609080097866350083 5f6d4)  mimic.io-thrd.390868: client session disconnected, remote_server = 192.168.123.119:34601, current_count = 3
D2020-12-27 22:41:37.876 (1609080097876533893 5f6d4)  mimic.io-thrd.390868: asio read from 192.168.123.119:34802 failed: End of file
D2020-12-27 22:41:37.8762 (1609080097876542301 5f6d4)  mimic.io-thrd.390868: client session disconnected, remote_server = 192.168.123.119:34802, current_count = 2
D2020-12-27 22:41:37.877 (1609080097877101304 5f6d5)  mimic.io-thrd.390869: asio read from 192.168.123.119:34803 failed: End of file
D2020-12-27 22:41:37.8771 (1609080097877108011 5f6d5)  mimic.io-thrd.390869: client session disconnected, remote_server = 192.168.123.119:34803, current_count = 1
D2020-12-27 22:41:37.877 (1609080097877490052 5f6d6)  mimic.io-thrd.390870: asio read from 192.168.123.119:34801 failed: End of file
D2020-12-27 22:41:37.8770 (1609080097877496326 5f6d6)  mimic.io-thrd.390870: client session disconnected, remote_server = 192.168.123.119:34801, current_count = 0
[       OK ] bulk_load_test.bulk_load_tests (213824 ms)
[----------] 2 tests from bulk_load_test (238066 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test case ran. (238066 ms total)
[  PASSED  ] 2 tests.
dsn exit with code 0
W2020-12-27 22:42:02.104 (1609080122104872517 60c15) unknown.io-thrd.396309:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
W2020-12-27 22:42:02.104 (1609080122104900000 60c15) unknown.io-thrd.396309:overwrite default thread pool for task RPC_CM_QUERY_PARTITION_CONFIG_BY_INDEX_ACK from THREAD_POOL_META_SERVER to THREAD_POOL_DEFAULT
D2020-12-27 22:42:02.1073 (1609080122107250390 60c15) unknown.io-thrd.396309: process(396309) start: 1609080122103, date: 2020-12-27 22:42:02.103
D2020-12-27 22:42:02.107 (1609080122107501598 60c15) unknown.io-thrd.396309: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:42:02.1071 (1609080122107508334 60c15) unknown.io-thrd.396309: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_DSN ...
D2020-12-27 22:42:02.107ÿ (1609080122107556150 60c15) unknown.io-thrd.396309: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:42:02.1071 (1609080122107656213 60c15) unknown.io-thrd.396309: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_DSN ...
D2020-12-27 22:42:02.107 (1609080122107752776 60c15) unknown.io-thrd.396309: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:42:02.1071 (1609080122107756545 60c15) unknown.io-thrd.396309: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:42:02.107ÿ (1609080122107786543 60c15) unknown.io-thrd.396309: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:42:02.1071 (1609080122107869601 60c15) unknown.io-thrd.396309: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_THRIFT ...
D2020-12-27 22:42:02.107 (1609080122107952901 60c15) unknown.io-thrd.396309: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:42:02.1071 (1609080122107956696 60c15) unknown.io-thrd.396309: [mimic] network client started at port 1, channel = RPC_CHANNEL_TCP, fmt = NET_HDR_RAW ...
D2020-12-27 22:42:02.107ÿ (1609080122107986663 60c15) unknown.io-thrd.396309: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
E2020-12-27 22:42:02.1077 (1609080122107999801 60c15) unknown.io-thrd.396309: asio udp socket bind failed, port = 60927, error = Address already in use
D2020-12-27 22:42:02.108 (1609080122108030755 60c15) unknown.io-thrd.396309: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
D2020-12-27 22:42:02.1081 (1609080122108097780 60c15) unknown.io-thrd.396309: [mimic] network client started at port 1, channel = RPC_CHANNEL_UDP, fmt = NET_HDR_RAW ...
D2020-12-27 22:42:02.108 (1609080122108103664 60c15) unknown.io-thrd.396309: === service_node=[mimic], primary_address=[192.168.123.119:1] ===
W2020-12-27 22:42:02.1081 (1609080122108145339 60c2e)  mimic.io-thrd.396334: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:42:02.1088 (1609080122108606568 60c15) unknown.io-thrd.396309: [mimic] thread pool [default] started, pool_code = THREAD_POOL_DEFAULT, worker_count = 8, worker_share_core = true, partitioned = false, ...
W2020-12-27 22:42:02.1081 (1609080122108656214 60c37)  mimic.io-thrd.396343: You may need priviledge to set thread priority. errno = 1
D2020-12-27 22:42:02.1084 (1609080122108964467 60c15) unknown.io-thrd.396309: [mimic] thread pool [THREAD_POOL_META_SERVER] started, pool_code = THREAD_POOL_META_SERVER, worker_count = 4, worker_share_core = true, partitioned = false, ...
D2020-12-27 22:42:02.109 (1609080122109035654 60c15) unknown.io-thrd.396309: MainThread: app_name=temp
Note: Google Test filter = test_detect_hotspot.*
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from test_detect_hotspot
[ RUN      ] test_detect_hotspot.hotspot_exist
============
start global_env()
meta1 pid: 394105
meta1 dir: /home/smilencer/Code/incubator-pegasus/onebox/meta1
project root: /home/smilencer/Code/incubator-pegasus
working dir: /home/smilencer/Code/incubator-pegasus/src/builder/test/function_test
D2020-12-27 22:42:02.121 (1609080122121841189 60c15) unknown.io-thrd.396309: get ip address from network interface(wlp0s20f3), addr(192.168.123.119), input interface("")
get ip: 192.168.123.119
/home/smilencer/Code/incubator-pegasus
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Stopping zookeeper ... STOPPED
Clearing zookeeper ... CLEARED
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Starting zookeeper ... STARTED
Zookeeper started at port 22181
starting server
cd /home/smilencer/Code/incubator-pegasus/onebox/meta1 && /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta &>result &
smilenc+  396451  396389  0 22:42 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta2 && /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta &>result &
smilenc+  396459  396389  0 22:42 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta3 && /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta &>result &
smilenc+  396501  396389  0 22:42 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/replica1 && /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica &>result &
smilenc+  396544  396389  0 22:42 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica2 && /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica &>result &
smilenc+  396586  396389  0 22:42 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica3 && /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica &>result &
smilenc+  396642  396389  0 22:42 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/collector && /home/smilencer/Code/incubator-pegasus/onebox/collector/pegasus_server config.ini -app_list collector &>result &
smilenc+  396700  396389  0 22:42 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/collector/pegasus_server config.ini -app_list collector
Wait cluster to become healthy...
Sleeped for 1 seconds
Sleeped for 2 seconds
Sleeped for 3 seconds
Sleeped for 4 seconds
Sleeped for 5 seconds
Sleeped for 6 seconds
Sleeped for 7 seconds
Sleeped for 8 seconds
Sleeped for 9 seconds
Sleeped for 10 seconds
Sleeped for 11 seconds
Sleeped for 12 seconds
Sleeped for 13 seconds
Sleeped for 14 seconds
Sleeped for 15 seconds
Sleeped for 16 seconds
Sleeped for 17 seconds
Sleeped for 18 seconds
Sleeped for 19 seconds
Sleeped for 20 seconds
Cluster becomes healthy.
D2020-12-27 22:42:29.4101 (1609080149410820210 60c15)  mimic.io-thrd.396309: client session created, remote_server = 127.0.0.1:34601, current_count = 1
D2020-12-27 22:42:29.4111 (1609080149411028061 60c17)  mimic.io-thrd.396311: client session connected, remote_server = 127.0.0.1:34601, current_count = 1
create app hotspot_test succeed, waiting for app ready
hotspot_test not ready yet, still waiting... (0/8)
hotspot_test not ready yet, still waiting... (0/8)
hotspot_test not ready yet, still waiting... (0/8)
hotspot_test not ready yet, still waiting... (5/8)
hotspot_test not ready yet, still waiting... (5/8)
hotspot_test not ready yet, still waiting... (5/8)
hotspot_test not ready yet, still waiting... (5/8)
hotspot_test not ready yet, still waiting... (5/8)
hotspot_test is ready now: (8/8)
hotspot_test is ready now!
start testing detecting hotspot...
D2020-12-27 22:42:47.4862 (1609080167486796795 60c15)  mimic.io-thrd.396309: client session created, remote_server = 192.168.123.119:34803, current_count = 2
D2020-12-27 22:42:47.4862 (1609080167486983338 60c18)  mimic.io-thrd.396312: client session connected, remote_server = 192.168.123.119:34803, current_count = 2
hotkey is detecting now, now state: replication::hotkey_type::WRITE
D2020-12-27 22:42:47.4873 (1609080167487397335 60c15)  mimic.io-thrd.396309: client session created, remote_server = 192.168.123.119:34802, current_count = 3
D2020-12-27 22:42:47.4873 (1609080167487533219 60c16)  mimic.io-thrd.396310: client session connected, remote_server = 192.168.123.119:34802, current_count = 3
hotkey is detecting now, now state: replication::hotkey_type::WRITE
D2020-12-27 22:42:47.4884 (1609080167488061500 60c15)  mimic.io-thrd.396309: client session created, remote_server = 192.168.123.119:34801, current_count = 4
D2020-12-27 22:42:47.4884 (1609080167488230939 60c17)  mimic.io-thrd.396311: client session connected, remote_server = 192.168.123.119:34801, current_count = 4
hotkey is detecting now, now state: replication::hotkey_type::WRITE
hotkey is detecting now, now state: replication::hotkey_type::WRITE
hotkey is detecting now, now state: replication::hotkey_type::WRITE
hotkey is detecting now, now state: replication::hotkey_type::WRITE
hotkey is detecting now, now state: replication::hotkey_type::WRITE
hotkey is detecting now, now state: replication::hotkey_type::WRITE
/home/smilencer/Code/incubator-pegasus/src/test/function_test/test_detect_hotspot.cpp:123: Failure
Value of: find_hotkey
  Actual: false
Expected: true
hotspot passed.....
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Stopping zookeeper ... STOPPED
Clearing zookeeper ... CLEARED
JMX enabled by default
Using config: /home/smilencer/Code/incubator-pegasus/.zk_install/zookeeper-3.4.6/bin/../conf/zoo.cfg
Starting zookeeper ... STARTED
Zookeeper started at port 22181
starting server
cd /home/smilencer/Code/incubator-pegasus/onebox/meta1 && /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta &>result &
smilenc+  399208  399146  0 22:42 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta1/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta2 && /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta &>result &
smilenc+  399216  399146  0 22:42 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta2/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/meta3 && /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta &>result &
smilenc+  399258  399146  0 22:42 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/meta3/pegasus_server config.ini -app_list meta
cd /home/smilencer/Code/incubator-pegasus/onebox/replica1 && /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica &>result &
smilenc+  399301  399146  0 22:42 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica1/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica2 && /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica &>result &
smilenc+  399343  399146  0 22:42 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica2/pegasus_server config.ini -app_list replica
cd /home/smilencer/Code/incubator-pegasus/onebox/replica3 && /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica &>result &
smilenc+  399399  399146  0 22:42 pts/1    00:00:00 /home/smilencer/Code/incubator-pegasus/onebox/replica3/pegasus_server config.ini -app_list replica
Wait cluster to become healthy...
Sleeped for 1 seconds
Sleeped for 2 seconds
Sleeped for 3 seconds
Sleeped for 4 seconds
Sleeped for 5 seconds
Sleeped for 6 seconds
Sleeped for 7 seconds
Sleeped for 8 seconds
Sleeped for 9 seconds
Sleeped for 10 seconds
Sleeped for 11 seconds
Sleeped for 12 seconds
Sleeped for 13 seconds
Sleeped for 14 seconds
Sleeped for 15 seconds
Sleeped for 16 seconds
Sleeped for 17 seconds
Sleeped for 18 seconds
Sleeped for 19 seconds
Sleeped for 20 seconds
Sleeped for 21 seconds
Sleeped for 22 seconds
Sleeped for 23 seconds
Sleeped for 24 seconds
Sleeped for 25 seconds
Sleeped for 26 seconds
Sleeped for 27 seconds
Sleeped for 28 seconds
Sleeped for 29 seconds
Cluster becomes healthy.
D2020-12-27 22:42:47.525 (1609080167525788870 60c16)  mimic.io-thrd.396310: asio read from 127.0.0.1:34601 failed: End of file
D2020-12-27 22:42:47.5253 (1609080167525802361 60c16)  mimic.io-thrd.396310: client session disconnected, remote_server = 127.0.0.1:34601, current_count = 3
D2020-12-27 22:42:47.537 (1609080167537883378 60c18)  mimic.io-thrd.396312: asio read from 192.168.123.119:34801 failed: End of file
D2020-12-27 22:42:47.5372 (1609080167537892746 60c18)  mimic.io-thrd.396312: client session disconnected, remote_server = 192.168.123.119:34801, current_count = 2
D2020-12-27 22:42:47.540 (1609080167540481894 60c18)  mimic.io-thrd.396312: asio read from 192.168.123.119:34802 failed: End of file
D2020-12-27 22:42:47.5401 (1609080167540489884 60c18)  mimic.io-thrd.396312: client session disconnected, remote_server = 192.168.123.119:34802, current_count = 1
D2020-12-27 22:42:47.540 (1609080167540516572 60c17)  mimic.io-thrd.396311: asio read from 192.168.123.119:34803 failed: End of file
D2020-12-27 22:42:47.5400 (1609080167540522552 60c17)  mimic.io-thrd.396311: client session disconnected, remote_server = 192.168.123.119:34803, current_count = 0
[  FAILED  ] test_detect_hotspot.hotspot_exist (79085 ms)
[----------] 1 test from test_detect_hotspot (79085 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (79085 ms total)
[  PASSED  ] 0 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] test_detect_hotspot.hotspot_exist

 1 FAILED TEST
dsn exit with code 1
run test test_detect_hotspot load failed: pegasus_function_test config.ini temp
run test "pegasus_function_test" in /home/smilencer/Code/incubator-pegasus/src/builder/bin/pegasus_function_test failed
